{
  "flow": {
    "onboarding": {
      "$contentActions": [
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "0db6c267-af72-479c-846d-3e04920fa8dc",
                "type": "text/plain",
                "content": "firstIntent"
              },
              "editable": false,
              "deletable": false,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "variable": "firstIntent"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "fd5b2772-8897-4159-a7e3-6913e069eeaf",
          "typeOfStateId": "state",
          "$connId": "con_3",
          "$id": "28acd696-5aed-4be3-abb3-4515543f9ec5",
          "conditions": [
            {
              "source": "input",
              "comparison": "equals",
              "values": ["$PAMU$ERBL0CKED"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "contact.extras.spamReceivedWarning",
              "values": ["false"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "359ceaa5-a98a-43f3-84d5-ef03c86b9743",
          "typeOfStateId": "state",
          "$connId": "con_8",
          "$id": "38b908b9-13bb-452d-9be2-948f2133d271",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "contact.extras.isSpam"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "1b9f1a69-f89a-427d-a5b4-64853a121515",
          "typeOfStateId": "state",
          "$connId": "con_13",
          "$id": "595f5c93-0dcc-4e99-9c9b-7b65be76ca24",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-99dd370c-559e-4ad3-b40a-d6fa5797ad02",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "onboarding",
      "root": true,
      "$title": "Início",
      "$position": { "top": "93px", "left": "641px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "fallback": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "9983b769-b37c-4041-9d2f-751b192c485d",
                "type": "text/plain",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "34649fdb-80fb-4ede-b6f3-5815f2b484b9",
          "typeOfStateId": "state",
          "$connId": "con_18",
          "$id": "dc2ab92d-94f2-4a80-b090-f420016e17ad",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": [
                "Vi isso no Instagram...",
                "Olá! Pode me dar mais informação sobre..."
              ],
              "variable": "firstIntent"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "userChannel",
              "values": ["whatsapp"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "contact.extras.updatedTermsAccepted",
              "values": ["true"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "34649fdb-80fb-4ede-b6f3-5815f2b484b9",
          "typeOfStateId": "state",
          "$connId": "con_23",
          "$id": "217f29e6-4883-4eb6-9cbd-0905be995522",
          "conditions": [
            {
              "source": "input",
              "comparison": "equals",
              "values": [
                "Vi isso no Instagram...",
                "Olá! Pode me dar mais informação sobre..."
              ]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "userChannel",
              "values": ["whatsapp"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "contact.extras.updatedTermsAccepted",
              "values": ["true"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "451c61a6-8dd7-43ab-ac0c-1c99df62e231",
          "typeOfStateId": "state",
          "$connId": "con_28",
          "$id": "f21e976a-6b26-4927-8e93-e65497dc058f",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "60282a85-cdc6-48be-90c5-8edd8728d3d8",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [],
      "id": "fallback",
      "$title": "Exceções",
      "$position": { "top": "11.8182px", "left": "1298.36px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "1b9f1a69-f89a-427d-a5b4-64853a121515": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "8896e710-e15b-48f3-864f-4747ac18bb81",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "5d2bca95-54d9-4285-a2ef-dcd21faf7b14",
          "typeOfStateId": "state",
          "$connId": "con_33",
          "$id": "9ba2b1b4-e009-4ad8-bcf0-eec0d1e3f7a0",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "12608a4d-21ad-4747-8cb5-9be75359f223",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Set UserChannel",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(contactIdentity) {\n    return getUserChannel(contactIdentity);\n}\n\nfunction getUserChannel(contactIdentity) {\n\n    const DEFAULT_CHANNEL = \"other\";\n    const contactChannelIdentifier = contactIdentity.split(\"@\")[1];\n\tconst channels = {\n\t\t\"wa.gw.msging.net\": \"whatsapp\",\n\t\t\"0mn.io\": \"blipchat\",\n\t\t\"messenger.gw.msging.net\" : \"facebook\",\n\t\t\"instagram.gw.msging.net\":\"instagram\"\n\t}\n\t\n    return channels[contactChannelIdentifier] || DEFAULT_CHANNEL;\n}",
            "inputVariables": ["contact.identity"],
            "outputVariable": "userChannel",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "3de93896-1e0e-459d-b6dc-d0ce3c09f216",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Content Type Object",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(userChannel) {\n    return getContactTypes(userChannel);\n}\n\nfunction getContactTypes(userChannel) {\n\n\tconst COMMON_TYPES = {\n\t\t\t\"button\": \"application/vnd.lime.select+json\",\n\t\t\t\"list\": \"application/vnd.lime.select+json\",\t\t\t\n\t\t\t\"image\": \"application/vnd.lime.media-link+json\",\n\t\t\t\"text\": \"text/plain\"\n\t};\n    \n\tconst contentType = {\n\t\t\"whatsapp\": {\n\t\t\t\"button\": \"application/json\",\n\t\t\t\"list\": \"application/json\",\t\t\t\n\t\t\t\"image\": \"application/vnd.lime.media-link+json\",\n\t\t\t\"text\": \"text/plain\"\t\t\t\n\t\t},\n\t\t\"blipchat\": COMMON_TYPES,\n\t\t\"facebook\": COMMON_TYPES,\n\t\t\"instagram\": COMMON_TYPES\n\t}\n\t\n    return contentType[userChannel] || COMMON_TYPES;\n\n}",
            "inputVariables": ["userChannel"],
            "outputVariable": "contentTypes",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "e3cfd2cd-8ee8-4a52-946f-feca5bd6af4e",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Set Text Tags",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(userChannel) {\n\treturn getBoldTagsByChannel(userChannel)\n}\n\nfunction getBoldTagsByChannel(userChannel) {\n\tconst DEFAULT_TEXT_TAGS = {\n\t\t\"open\": \"\",\n\t\t\"close\": \"\",\n\t\t\"open_i\": \"\",\n\t\t\"close_i\": \"\",\n\t\t\"breakline\": \" \"\n\t};\n\tconst channelTextTags = {\n\t\t\"whatsapp\": {\n\t\t\t\"open\": \"*\",\n\t\t\t\"close\": \"*\",\n\t\t\t\"open_i\": \"_\",\n\t\t\t\"close_i\": \"_\",\n\t\t\t\"breakline\": \"\\n\"\n\t\t},\n\t\t\"blipchat\": {\n\t\t\t\"open\": \"<b>\",\n\t\t\t\"close\": \"</b>\",\n\t\t\t\"open_i\": \"<i>\",\n\t\t\t\"close_i\": \"</i>\",\n\t\t\t\"breakline\": \"\\n\"\n\t\t}\n\t}\n\n\treturn channelTextTags[userChannel] || DEFAULT_TEXT_TAGS;\n}",
            "inputVariables": ["userChannel"],
            "outputVariable": "channelTextTags",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "429dfab0-8b59-4043-9709-d8592fd15c24",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set lastblock",
          "$invalid": false,
          "settings": { "variable": "lastblock", "value": "onboarding" },
          "conditions": []
        },
        {
          "$id": "862aebed-5bd9-4485-827f-2e10f4600948",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Define phone",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(phone) {\n    phone = phone.slice(2).split('@')[0]\n    let ddd = phone.slice(0,2)\n    phone = phone.slice(2)\n    if(phone.length == 8) phone = '9'+phone\n    return ddd+phone\n}",
            "inputVariables": ["tunnel.originator"],
            "outputVariable": "phone",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notExists",
              "values": [],
              "variable": "phone"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "userChannel",
              "values": ["whatsapp"]
            }
          ]
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "327d0b10-399c-4bdd-9681-1080360cae59",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-f1aed6f2-f68d-44b3-966b-9ba977c716c2",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-816689d5-9f17-49a4-8674-3ff30dc94b94",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-ddc3d9aa-4e82-401e-8f49-fda1ae31d325",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        }
      ],
      "id": "1b9f1a69-f89a-427d-a5b4-64853a121515",
      "root": false,
      "$title": "[PCR] Initial Setup",
      "$position": { "top": "237px", "left": "642px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "3ab39202-c70f-4966-833c-23ada96009cb": {
      "$contentActions": [
        {
          "action": {
            "$id": "e1a00f45-6b5c-4746-879c-7fe8261901ff",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "4e4f9115-dd35-4c17-af49-540a7fed0f59",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": "1000" },
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "4e4f9115-dd35-4c17-af49-540a7fed0f59",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": "1000" }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "abb6bc33-67d2-4579-9b72-20ae64735395",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "{{contentTypes@text}}",
              "rawContent": "{{messageContent}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "5a9aa146-d52b-4620-b5b2-a65b7c678d2e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "159a2e06-f5ee-4be0-848a-a0ebc03c9c8a",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "4876df1f-ea62-43ac-b654-033dd04f636b",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": "1000" },
              "metadata": {
                "#stateName": "{{state.name}}",
                "#stateId": "{{state.id}}",
                "#messageId": "{{input.message@id}}",
                "#previousStateId": "{{state.previous.id}}",
                "#previousStateName": "{{state.previous.name}}"
              }
            },
            "$cardContent": {
              "document": {
                "id": "4876df1f-ea62-43ac-b654-033dd04f636b",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": "1000" }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "7ecfdc44-50b0-4139-9b55-6b674230ab68",
          "typeOfStateId": "state",
          "$connId": "con_38",
          "$id": "4d0ec6ae-0b28-4e0a-8abb-4a8ef175d691",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "cda1fa88-870c-4fca-bfd7-ab1ebbc41699",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set lastblock id",
          "$invalid": false,
          "settings": { "variable": "lastblock", "value": "{{state.id}}" },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "7ecfdc44-50b0-4139-9b55-6b674230ab68",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-f9517fc3-9e27-495d-938c-c9d00b75fdd5",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-52f26e5f-35bf-4740-b0fe-96cdf4283ab5",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "3ab39202-c70f-4966-833c-23ada96009cb",
      "root": false,
      "$title": "[MSG] OPTIN - Show New Users Message",
      "$position": { "top": "556px", "left": "640px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "327d0b10-399c-4bdd-9681-1080360cae59": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "8a295040-34cc-4d7e-a3a2-8b4ff908ae8b",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "3ab39202-c70f-4966-833c-23ada96009cb",
          "typeOfStateId": "state",
          "$connId": "con_43",
          "$id": "0f60b904-a80f-4635-915d-0510c5048806",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "db9a8eeb-c4f3-4d33-b0c0-bb04adf93011",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(contentTypes, userChannel, channelTextTags) {\n\tcontentTypes = JSON.parse(contentTypes);\n\tchannelTextTags = JSON.parse(channelTextTags);\n\n\tconst text = `Oii!${channelTextTags.breakline}Eu sou a ${channelTextTags.open}Kora${channelTextTags.close}, assistente virtual da ${channelTextTags.open}Coca-Cola Brasil${channelTextTags.close}. 😊`;\n\tconst messageContent = {\n\t\t\"title\": \"\",\n\t\ttext,\n\t\t\"type\": \"image/jpeg\",\n\t\t\"uri\": \"https://storage.googleapis.com/kora-nlp-prod.appspot.com/koraavatar.jpeg\",\n\t\t\"aspectRatio\": \"1:1\"\n\t};\n\n\tif (userChannel == \"other\") {\n\t\treturn messageContent;\n\t}\n\n\treturn text;\n}",
            "inputVariables": [
              "contentTypes",
              "userChannel",
              "channelTextTags"
            ],
            "outputVariable": "messageContent"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "3ab39202-c70f-4966-833c-23ada96009cb",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-ac1e8ce1-0251-4d8a-96c2-2f6a87991bcb",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "327d0b10-399c-4bdd-9681-1080360cae59",
      "root": false,
      "$title": "[PCR] OPTIN - Generate New Users Message",
      "$position": { "top": "383px", "left": "647px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "7ecfdc44-50b0-4139-9b55-6b674230ab68": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "8a295040-34cc-4d7e-a3a2-8b4ff908ae8b",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "a4ece9e3-60aa-4e0b-be73-49d3725ab18a",
          "typeOfStateId": "state",
          "$connId": "con_48",
          "$id": "b980519a-2042-4b05-8631-ae9dc95005d6",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "db9a8eeb-c4f3-4d33-b0c0-bb04adf93011",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_createMenuFunction}}\n\nfunction run(userChannel, channelTextTags) {\n    return getMenu(userChannel, channelTextTags);\n}\n\nfunction getMenu(userChannel, channelTextTags) {\n    channelTextTags = JSON.parse(channelTextTags);\n    let options = ['Concordo!', 'Não concordo.']\n\tconst text = `Antes de continuar, ${channelTextTags.open}preciso que você concorde${channelTextTags.close} com nossos termos e políticas de privacidade. 😉${channelTextTags.breakline}Você pode acessá-los aqui:${channelTextTags.breakline}➡️ https://cokeurl.com/TermosDeUso${channelTextTags.breakline}➡️ https://cokeurl.com/PrivacidadeCocaCola${channelTextTags.breakline}➡️ https://cokeurl.com/Consentimento${channelTextTags.breakline}➡️ https://cokeurl.com/TermosMarketing`;\n\n    const menuFields = {\n        text,\n        options\n    };\n    let props = {\n        userChannel,\n        channelTextTags,\n        menuFields\n    };\n    let config = {\n        hasDefaultQuickReply: true,\n        hasWppQuickReply: true,\n        isBlipImmediateMenu: true\n    };\n    let menu = createMenu(props, config);\n    return menu;\n}",
            "inputVariables": ["userChannel", "channelTextTags"],
            "outputVariable": "messageContent"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "a4ece9e3-60aa-4e0b-be73-49d3725ab18a",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-5fb838a3-b4f3-411a-87ed-c81360e75a53",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "7ecfdc44-50b0-4139-9b55-6b674230ab68",
      "root": false,
      "$title": "[PCR] OPTIN - Generate Terms Message",
      "$position": { "top": "723px", "left": "642px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "a4ece9e3-60aa-4e0b-be73-49d3725ab18a": {
      "$contentActions": [
        {
          "action": {
            "$id": "2b846f8a-35b1-4bf6-b3a8-ad1eaee9d223",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "790acb00-5ad4-4a90-ba64-4c2cc643dc14",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": "1000" },
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "790acb00-5ad4-4a90-ba64-4c2cc643dc14",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": "1000" }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "47b84de9-0ef1-4ca3-bb52-55994940e5bd",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "{{contentTypes@button}}",
              "rawContent": "{{messageContent@content}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "5a9aa146-d52b-4620-b5b2-a65b7c678d2e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "778d23d2-fc40-4c47-b198-878ac1a471d4",
          "typeOfStateId": "state",
          "$connId": "con_53",
          "$id": "37775301-daed-4220-ad6b-e005d6603a9d",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "37fb5cc6-59ee-4c0f-9fba-027e72f984f3",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set lastblock id",
          "$invalid": false,
          "settings": { "variable": "lastblock", "value": "{{state.id}}" },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "778d23d2-fc40-4c47-b198-878ac1a471d4",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-9140cb94-104c-4f96-99bb-cc2a6cd0c7b2",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-ae160d37-72a8-4d6f-bd1c-31d74d4fb871",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "a4ece9e3-60aa-4e0b-be73-49d3725ab18a",
      "root": false,
      "$title": "[MSG] OPTIN - Show Terms",
      "$position": { "top": "893px", "left": "640px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "778d23d2-fc40-4c47-b198-878ac1a471d4": {
      "$contentActions": [
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "5a9aa146-d52b-4620-b5b2-a65b7c678d2e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "1b28b8fb-6b2b-4358-953e-72dc4103708a",
          "typeOfStateId": "state",
          "$connId": "con_58",
          "$id": "a860a866-c4d2-4eb0-a4e2-c7bc1f1143bb",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Concordo"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "aaf112f2-d573-430b-b54e-8c05cd49c5f9",
          "typeOfStateId": "state",
          "$connId": "con_63",
          "$id": "426f3f0c-9c6e-4614-bec8-e7f734c1aa7f",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Não Concordo"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "878fc918-3974-4ef1-aa7b-081dcdd540f6",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Set UserAction",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_inputProcessingFunction}}\n\nfunction run(inputContent) {\n    return getSelectedMenuOption(inputContent, 'text/plain');\n}\n\nfunction getSelectedMenuOption(inputContent, inputType) {\n    let options = [];\n    options.push(\n        {\n            regex: /^Concordo!$|^Aceito$|^Concordo$/,\n            value: 'Concordo'\n        },\n        {\n            regex: /Não Concordo|Não Concordo.|Nao Concordo|Não Aceito|Nao Aceito|^Não$|^Nao$/,\n            value: 'Não Concordo'\n        }\n    );\n    let props = {\n        input: inputContent,\n        inputType,\n        options\n    };\n    let config = {\n        isNumberMenu: false,\n        isReversed: false,\n        shouldRemoveSpecialCharacters: false,\n        shouldRemoveWhiteSpaces: false\n    };\n    let selectedMenuOption = validateInputOptions(props, config);\n    \n    return selectedMenuOption;\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "userAction"
          },
          "conditions": []
        },
        {
          "$id": "1b14c38e-c4dd-454c-b82c-89e8d1a77c28",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Optin - Optin - A1",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Optin - Optin - A1",
            "action": "{{userAction@value}}"
          },
          "conditions": []
        },
        {
          "$id": "f9b8db10-4806-4158-a71d-247b17eeb04b",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Set Optin",
          "$invalid": false,
          "settings": {
            "extras": {
              "newTermsAccepted": "true",
              "termsAcceptedDate": "{{calendar.datetime}}",
              "updatedTermsAccepted": "true",
              "updatedTermsAcceptedDate": "{{calendar.datetime}}"
            }
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "userAction@value",
              "values": ["Concordo"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "7ecfdc44-50b0-4139-9b55-6b674230ab68",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-f4b024d9-bbb8-4f70-a9d6-48d76e820271",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-33527a9f-f2c5-4052-be45-1d1d79820cef",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-38f006ef-acc8-4f14-a186-931e704de365",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-9e9b93f8-d04c-417a-82cb-8c587528590d",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "778d23d2-fc40-4c47-b198-878ac1a471d4",
      "root": false,
      "$title": "[IN] OPTIN - Terms Acceptance",
      "$position": { "top": "1079px", "left": "600px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "b171abf9-d65c-4b66-9d37-3905fdb46106": {
      "$contentActions": [
        {
          "action": {
            "$id": "84e56537-4df1-44f4-9249-33b2d5f4c81e",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "d011739c-37c5-4591-9566-597001c5dc4e",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "d011739c-37c5-4591-9566-597001c5dc4e",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "b68c623e-7656-4c9f-9292-6abad02ed45a",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "c98483e3-38a4-449d-8edc-6dfa22e1bdc4",
              "type": "text/plain",
              "content": "{{showMessage}}",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "c98483e3-38a4-449d-8edc-6dfa22e1bdc4",
                "type": "text/plain",
                "content": "{{showMessage}}"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "5a9aa146-d52b-4620-b5b2-a65b7c678d2e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "7ecfdc44-50b0-4139-9b55-6b674230ab68",
          "typeOfStateId": "state",
          "$connId": "con_68",
          "$id": "9828d118-06f1-4e58-a4a2-b7a771f6961d",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "6bc72924-2bd1-47d1-be49-9baa3b593ece",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set lastblock id",
          "$invalid": false,
          "settings": { "variable": "lastblock", "value": "{{state.id}}" },
          "conditions": []
        },
        {
          "$id": "f421266a-009f-4fe5-835b-d7bc1230f1bd",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] OPTIN - Show Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(messageContent) {\n                messageContent = JSON.parse(messageContent);\n                return messageContent.content; //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["messageContent"],
            "outputVariable": "showMessage",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "5f6150d9-9656-4fda-80cc-e4f93d708f6a",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set Show Message",
          "$invalid": false,
          "settings": { "variable": "showMessage", "value": "" },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-a1b1aedc-8f6b-4772-8907-4721c2c14bdc",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-2dffa0d8-f619-470f-be63-793fd2d47b8f",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-dc184116-dfd9-4cde-8695-43023844885c",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "b171abf9-d65c-4b66-9d37-3905fdb46106",
      "root": false,
      "$title": "[MSG] OPTIN - Terms Not Accepted",
      "$position": { "top": "1056.43px", "left": "1154.88px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "2ee65e03-12de-4ce6-8717-32dd4bbec9f8": {
      "$contentActions": [
        {
          "action": {
            "$id": "0618c336-3fbc-4b1d-beeb-1040177a142f",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "7840872f-86ba-4bf5-b0ba-51659edde603",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "7840872f-86ba-4bf5-b0ba-51659edde603",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "993e44b1-fcd2-4a63-98b6-e874a1a1bfe3",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "9250d962-1c64-48c0-8d4e-ff39545593d5",
              "type": "text/plain",
              "content": "{{messageContent}}",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "9250d962-1c64-48c0-8d4e-ff39545593d5",
                "type": "text/plain",
                "content": "{{messageContent}}",
                "metadata": {}
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "5a9aa146-d52b-4620-b5b2-a65b7c678d2e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "3774a3fb-d4cd-4766-849c-0190a509a528",
          "typeOfStateId": "state",
          "$connId": "con_73",
          "$id": "d2da8c61-2c4b-47fc-b0ad-030582b32128",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "3774a3fb-d4cd-4766-849c-0190a509a528",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-4576790f-9caf-4449-b520-fc9640f57ebe",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "2ee65e03-12de-4ce6-8717-32dd4bbec9f8",
      "root": false,
      "$title": "[MSG] OPTIN - Show Name",
      "$position": { "top": "1424px", "left": "354px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "3774a3fb-d4cd-4766-849c-0190a509a528": {
      "$contentActions": [
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "e00aacdb-169a-43fd-80a9-008345395292",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "userName"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "variable": "userName"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "9c828e94-6007-4911-9d33-fbe7dc6b5f11",
          "typeOfStateId": "state",
          "$connId": "con_78",
          "$id": "77523b4f-28f0-4f4d-a37d-b33b18d8d020",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "26098aa6-c382-4b29-a892-cd13fa31c705",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Optin - Pergunta nome - A2",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Optin - Pergunta nome - A2",
            "action": "Perguntar nome"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "9c828e94-6007-4911-9d33-fbe7dc6b5f11",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-c1e616cb-ca50-4530-bebe-5fa7c19654f5",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-7c87e531-2ab1-4ba2-969b-69b3105940b7",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "3774a3fb-d4cd-4766-849c-0190a509a528",
      "root": false,
      "$title": "[IN] User Name",
      "$position": { "top": "1288px", "left": "670px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "9c828e94-6007-4911-9d33-fbe7dc6b5f11": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "23b74ba8-e1ad-426d-87c1-f559817a2057",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "userName"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "variable": "userName"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "9025f34b-09db-4388-ba4f-679042c4b07a",
          "typeOfStateId": "state",
          "$connId": "con_83",
          "$id": "c257c6c4-47d8-4595-acbb-58095211b793",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["false"],
              "variable": "isInputValid"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "fc287a3e-a4ed-4a57-86c8-f78f02af215b",
          "typeOfStateId": "state",
          "$connId": "con_88",
          "$id": "a6b78bc2-3054-4cbf-894a-f67dd2360be3",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isInputValid"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "a90bcb74-40b1-43b5-a1a9-c0cfc371d58a",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Check Deny List",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(denyList,textInput){\n   let regexDeny = new RegExp('\\\\b('+denyList+')\\\\b','gi');\n   textInput=textInput.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n   const matches = textInput.match(regexDeny);\n   return matches ? false : true;\n}\n",
            "inputVariables": ["resource.denyList", "userName"],
            "outputVariable": "isInputValid",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "0719c42f-a68c-4bf2-94e5-5617e5955bb2",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Optin - Pergunta nome Exceção DenyList- A2",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Optin - Pergunta Nome inesperado - A2",
            "action": "Texto Deny List"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "isInputValid",
              "values": ["false"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-ae873adc-2e28-4257-8dbe-0b115857ebb9",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-39193b1c-e060-4ccf-a89d-b48dfaae6520",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        }
      ],
      "id": "9c828e94-6007-4911-9d33-fbe7dc6b5f11",
      "root": false,
      "$title": "[PCR] Verify If Text Is On Deny",
      "$position": { "top": "1508px", "left": "653px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "fc287a3e-a4ed-4a57-86c8-f78f02af215b": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "23b74ba8-e1ad-426d-87c1-f559817a2057",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "userName"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "variable": "userName"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "02daa1bc-bed6-47bd-8dd3-e08f7214c5ab",
          "typeOfStateId": "state",
          "$connId": "con_93",
          "$id": "a6b78bc2-3054-4cbf-894a-f67dd2360be3",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["false"],
              "variable": "isInputValid@isValid"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "de4adbc2-5d4f-4fc9-af76-06137f6f93e2",
          "typeOfStateId": "state",
          "$connId": "con_98",
          "$id": "9d20275a-f9cd-4d4a-bd64-0a03b07dcd13",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isInputValid@isValid"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "a90bcb74-40b1-43b5-a1a9-c0cfc371d58a",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Check if Name Exist",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(userName, namesList) {\n    const introductions = 'Meu nome e|Me chamo|Sou|Sou a|Sou o|A|O';\n    userName = userName.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n    const regexIntro = new RegExp('\\\\b('+introductions+')\\\\b','gi');\n    userName = userName.replace(regexIntro,\"\").trim().split(' ');\n    userName = userName.join('|');\n    const regexName = new RegExp('\\\\b('+userName+')\\\\b','gi');\n    const matches = namesList.match(regexName);\n    let input = {\n        isValid: false\n    };\n    \n    if(matches){\n        input = {\n            isValid: true,\n            userName: matches[0][0] + matches[0].slice(1).toLowerCase()\n        }\n    }\n    return input;\n}",
            "inputVariables": ["userName", "resource.namesList"],
            "outputVariable": "isInputValid",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "97f6a43e-c9b5-49bf-9c3c-d901a3384291",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Update userName",
          "$invalid": false,
          "settings": {
            "variable": "userName",
            "value": "{{isInputValid@userName}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "isInputValid@isValid",
              "values": ["true"]
            }
          ]
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "background": "#FF6F1E",
          "label": "Script",
          "id": "blip-tag-ebca05a8-2dcc-5342-ff65-de90c8c47421",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-f85027a0-e98c-4685-8ec8-5ae2653caaf1",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-90a09442-2574-4c9c-91c5-4899f9d3e424",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        }
      ],
      "id": "fc287a3e-a4ed-4a57-86c8-f78f02af215b",
      "root": false,
      "$title": "[PCR] Verify if UserName is Valid",
      "$position": { "top": "1577.41px", "left": "1025.04px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "9025f34b-09db-4388-ba4f-679042c4b07a": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "0b4b7b7f-685c-4947-bd86-15eab6e45d03",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "7a32ee70-b8a9-40b0-8400-8f3bb56c4270",
          "typeOfStateId": "state",
          "$connId": "con_103",
          "$id": "f212629c-ecf4-4a01-8696-e6753c18fd13",
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "lastName"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "6ae824ca-08b1-41f9-9c92-4cb3035bd749",
          "typeOfStateId": "state",
          "$connId": "con_108",
          "$id": "9a1eb12b-f54d-4e18-9ad0-ed9851346f38",
          "conditions": [
            {
              "source": "context",
              "comparison": "greaterThan",
              "values": ["2"],
              "variable": "counterName"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "2ee65e03-12de-4ce6-8717-32dd4bbec9f8",
          "typeOfStateId": "state",
          "$connId": "con_113",
          "$id": "59867f73-e9ba-421d-9d36-1e665b90ecc5",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "a179ce83-7a25-4094-8df8-461245d7b5db",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "\nfunction run(contentTypes, userChannel, channelTextTags, counterName, previousBlock) {\n    contentTypes = JSON.parse(contentTypes);\n    channelTextTags = JSON.parse(channelTextTags);\n    let text = `Ops! Não consegui entender.${channelTextTags.breakline}Você poderia dizer novamente, por favor? `\n    if(counterName == 2 && previousBlock!= '[PCR] Verify If LastName Is On Deny'){\n        text = `Poxa, não estou reconhecendo o seu nome aqui na minha base de dados.${channelTextTags.breakline}Enquanto não atualizo a lista, vou te chamar de Visitante!`;\n    }\n    return text;\n}",
            "inputVariables": [
              "contentTypes",
              "userChannel",
              "channelTextTags",
              "counterName",
              "state.previous.name"
            ],
            "outputVariable": "messageContent",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "4026f66b-de29-460c-a1ff-3511483a8509",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Increment counterName",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(counterName) {\n    counterName = parseInt(counterName)+1;\n    return counterName;\n}",
            "inputVariables": ["counterName"],
            "outputVariable": "counterName",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "state.previous.name",
              "values": ["[PCR] Save UserName Contact"]
            }
          ]
        },
        {
          "$id": "6cb6524c-e5e4-48d2-84e6-c16fb9d61578",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Update userName with Visitante",
          "$invalid": false,
          "settings": { "variable": "userName", "value": "Visitante" },
          "conditions": [
            {
              "source": "context",
              "comparison": "greaterThanOrEquals",
              "variable": "counterName",
              "values": ["2"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "state.previous.name",
              "values": ["[PCR] Update Invalid Names List"]
            }
          ]
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-c071ec5f-cf57-40a8-95af-5948cda391ba",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-eadac244-0f18-46d0-83fb-f8f5f631a086",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        }
      ],
      "id": "9025f34b-09db-4388-ba4f-679042c4b07a",
      "root": false,
      "$title": "[PCR] Generate Ask Name Again Message",
      "$position": { "top": "1648px", "left": "319px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "40a7fe7a-b550-4421-994e-d96fc15208b3": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "8a295040-34cc-4d7e-a3a2-8b4ff908ae8b",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "7a32ee70-b8a9-40b0-8400-8f3bb56c4270",
          "typeOfStateId": "state",
          "$connId": "con_118",
          "$id": "2cb8ca44-b558-4798-a15f-f79b5946fa69",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "db9a8eeb-c4f3-4d33-b0c0-bb04adf93011",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "\nfunction run(contentTypes, userChannel, channelTextTags) {\n    contentTypes = JSON.parse(contentTypes);\n    channelTextTags = JSON.parse(channelTextTags);\n    const text = `Prazer! 😊${channelTextTags.breakline}Me diz seu ${channelTextTags.open}último nome${channelTextTags.close}, por favor.`\n    return text;\n}",
            "inputVariables": [
              "contentTypes",
              "userChannel",
              "channelTextTags"
            ],
            "outputVariable": "messageContent"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "7a32ee70-b8a9-40b0-8400-8f3bb56c4270",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-0de1acc7-6e25-4536-b845-f65fb2fffcf2",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "40a7fe7a-b550-4421-994e-d96fc15208b3",
      "root": false,
      "$title": "[PCR] OPTIN - Generate LastName Message",
      "$position": { "top": "1767px", "left": "666.571px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "8890d892-438a-4502-af30-f9d5f0b8d1d6": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "8a295040-34cc-4d7e-a3a2-8b4ff908ae8b",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "7f7d9b8c-f397-4395-8c9c-f57aebe1fb31",
          "typeOfStateId": "state",
          "$connId": "con_123",
          "$id": "32a8d9fc-2420-41da-9e8e-afeefa150f85",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "menuOptionMessagePromotionDecision"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "hasCupons",
              "values": ["true"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "3748f0ba-b79e-4be1-a1f1-0c9db6ea1549",
          "typeOfStateId": "state",
          "$connId": "con_128",
          "$id": "b980519a-2042-4b05-8631-ae9dc95005d6",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "3ec677c1-9358-408c-b118-d842e6177316",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Verify if magicAudiosIsActive",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(magicAudiosCupomDeliveredList) {\n    magicAudiosCupomDeliveredList = JSON.parse(magicAudiosCupomDeliveredList);\n\n    return ((magicAudiosCupomDeliveredList.cupons.length<1000));\n}",
            "inputVariables": ["resource.magicAudiosCupomDeliveredList"],
            "outputVariable": "isMagicAudiosActive",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "userChannel",
              "values": ["whatsapp"]
            }
          ]
        },
        {
          "$id": "e404827c-d702-40a7-87ba-2c9a2f007a37",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[PCR] Check if promo is on date",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(day, hour) {\n    day = parseInt(day);\n    hour = parseInt(hour);\n\n    return (((day == 26) && (hour >= 17)) || (day > 26));\n}",
            "inputVariables": ["calendar.day", "calendar.hour"],
            "outputVariable": "isMagicAudiosOverDate",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "11e80011-47e4-4754-844b-ce2a9fc70c03",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Menu Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(previousBlock) {\n    if (previousBlock === '[PCR] Initial Setup') {\n        return 'Oii!\\nQue bom que você voltou!  😃';\n\n    } else {\n        var random_boolean = Math.random() < 0.5;\n        if (random_boolean) {\n            return `Vamos lá, {{username}}!\\n\\nModéstia à parte, eu sou boa em vários assuntos Coca-Cola. 😉`;\n\n        } else {\n            return `{{username}}, nós podemos falar sobre vários assuntos! ☺️`;\n        }\n    }\n}",
            "inputVariables": [],
            "outputVariable": "messageContent",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "30fba62a-59d9-4719-81da-ab081f0da80c",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Verify if hasCupons",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(cupomList) {\n    cupomList = JSON.parse(cupomList);\n    let cupons = cupomList.cupons;\n    let hasCupons = cupons.length > 0;\n    return hasCupons; \n}",
            "inputVariables": ["resource.cupomList"],
            "outputVariable": "hasCupons",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "userChannel",
              "values": ["whatsapp"]
            }
          ]
        },
        {
          "$id": "36bcf217-4736-438f-b4f2-810c5402cdc0",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Set Promo WC Cupom",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(contact) {\n    contact = JSON.parse(contact);\n    return contact && contact.extras && contact.extras.promo_wc_cupom ? contact.extras.promo_wc_cupom : '';\n}",
            "inputVariables": ["contact"],
            "outputVariable": "promoWcCupom",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "1e071e79-91f5-4d55-b63c-7e18dbd5ec09",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] - Set is Quiz Answered V2",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(isQuizAnsweredV2, promoWcCupom) {\n    blnPromoWcCupom = promoWcCupom !== '' || !!promoWcCupom;\n    return (isQuizAnsweredV2 === true || isQuizAnsweredV2 === 'true') || blnPromoWcCupom;\n}",
            "inputVariables": [
              "contact.extras.isQuizAnsweredV2",
              "promoWcCupom"
            ],
            "outputVariable": "isQuizAnsweredV2",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "ce3693bd-9513-4456-9211-6f1564ed5999",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Get Coupon is Active",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(couponBBB23Str) {\n    const { isActive } = JSON.parse(couponBBB23Str);\n\n    return isActive;\n}",
            "inputVariables": ["resource.couponBBB23"],
            "outputVariable": "isActivePromoBBB23",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "a4b58687-7f20-48af-a232-d596d1f0897f",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] - Add Temporary Option Menu",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(menuOptions, hasCupons, isQuizAnswered, userId, isAllSurveysAnswered, userChannel, tunnelOwner, isQuizAnsweredV2, isMagicAudiosActive, isActivePromoBBB23) {\n    menuOptions = JSON.parse(menuOptions);\n\n    if (userChannel == \"whatsapp\" && menuOptions.options.length < 10) {\n        menuOptions.options.push(        {\n            \"name\": \"Áudios Mágicos ✨\",\n            \"position\": -1,\n            \"valideOptions\": \"Magic audios ✨|Magic Áudios ✨ |Magic|Audios|Áudios Mágicos ✨|Áudios\",\n            \"service\": \"TempPromo2\",\n            \"sendMessage\": \"Oi\"\n        });\n    }\n\n    if (!isAllSurveysAnswered && (userChannel == \"whatsapp\" || userChannel == \"blipchat\" || tunnelOwner.includes(\"leao\"))\n        && menuOptions.options.length < 10) {\n        menuOptions.options.push({\n            \"name\": \"Ajude a Kora! 🥰\",\n            \"position\": 2,\n            \"valideOptions\": \"Ajude a Kora! 🥰|Ajude a Kora!|^Ajude$|^Kora$\",\n            \"service\": \"HelpKora\",\n            \"sendMessage\": \"Oi\"\n        });\n    }\n\n    if (userChannel == \"whatsapp\" && menuOptions.options.length < 10) {\n        menuOptions.options.push({\n            \"name\": \"Loja Coca-Cola 🛍️️\",\n            \"position\": 1,\n            \"valideOptions\": \"Loja Coca-Cola 🛍️|Loja Coca-Cola🛍️|Loja Coca-Cola|Loja\",\n            \"service\": \"Loja\",\n            \"sendMessage\": \"Oi\"\n        });\n    }\n\n    if (userChannel == \"whatsapp\" && menuOptions.options.length < 10 && isActivePromoBBB23 == \"true\") {\n        menuOptions.options.push({\n            \"name\": \"BBB 23 📺️\",\n            \"position\": -1,\n            \"valideOptions\": \"BBB 23 📺|BBB 23📺|BBB23|BBB 23\",\n            \"service\": \"TempPromo\",\n            \"sendMessage\": \"#KoraBBB23\"\n        });\n    }\n   \n    return menuOptions;\n}",
            "inputVariables": [
              "resource.menuOptions",
              "hasCupons",
              "contact.extras.isQuizAnswered",
              "tunnel.originator",
              "contact.extras.isAllSurveysAnswered",
              "userChannel",
              "tunnel.owner",
              "contact.extras.isQuizAnsweredV2",
              "isMagicAudiosActive",
              "isActivePromoBBB23"
            ],
            "outputVariable": "menuOptions",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "db9a8eeb-c4f3-4d33-b0c0-bb04adf93011",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Menu",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_createMenuFunction}}\n\nfunction run(userChannel, channelTextTags, mainMessage, menuOptions) {\n    return getMenu(userChannel, channelTextTags, mainMessage, menuOptions);\n}\n\nfunction getMenu(userChannel, channelTextTags, mainMessage, menuOptions) {\n    channelTextTags = JSON.parse(channelTextTags);\n    let menu = JSON.parse(menuOptions);\n    let options = menu.options.sort((a,b) => a.position - b.position);\n    options = menu.options.map( x => x.name);\n\tconst text = mainMessage;\n\n    const menuFields = {\n        text,\n        options,\n        button: 'Escolha aqui'\n    };\n    let props = {\n        userChannel,\n        channelTextTags,\n        menuFields\n    };\n    let config = {\n        hasDefaultQuickReply: true,\n        hasWppQuickReply: true,\n        isBlipImmediateMenu: true\n    };\n    let menu = createMenu(props, config);\n    return menu;\n}",
            "inputVariables": [
              "userChannel",
              "channelTextTags",
              "messageContent",
              "menuOptions"
            ],
            "outputVariable": "menu",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "6b248c06-5ec6-49f5-954d-a81b50cb6ac6",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set LastBlock",
          "$invalid": false,
          "settings": { "variable": "lastblock", "value": "{{state.id}}" },
          "conditions": []
        },
        {
          "$id": "3fd956ac-502e-492c-88f2-9a79a27bc653",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Define frase Promoção",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(tunnelOriginator, isQuizAnswered, hasCupons, ignoreQuizToAnswer, magicAudiosCupomDeliveredList, magicAudiosUserTries) {\n    hasCupons = JSON.parse(hasCupons);\n    magicAudiosCupomDeliveredList = JSON.parse(magicAudiosCupomDeliveredList);\n\n    // if (tunnelOriginator === '5519987273204@wa.gw.msging.net'\n    //     || tunnelOriginator === '5521999307626@wa.gw.msging.net'\n    //     || tunnelOriginator === '5521973927194@wa.gw.msging.net'\n    //     || tunnelOriginator === '553182733141@wa.gw.msging.net'\n    //     || tunnelOriginator === '5511970702112@wa.gw.msging.net'\n    //     || tunnelOriginator === '554799335207@wa.gw.msging.net'\n    //     || tunnelOriginator === '554191997922@wa.gw.msging.net') {\n    // }\n    if (!isQuizAnswered && !ignoreQuizToAnswer && (hasCupons === \"true\" || hasCupons === true)) {\n        return {\n            hasDecision: true,\n            options: defineOptions(),\n            message: 'Já estamos em ritmo de *Copa do Mundo*! ⚽\\n\\nPor isso, preparei um *bate-bola* divertido para testar seus conhecimentos sobre as *edições passadas* desse grande evento esportivo. ✨\\n\\nVocê tem *3 minutos* para responder tudo, ok?\\nSe acertar de 9 a 10 questões, *ganha um brinde*! 😉'\n        };\n    } else {\n        return {\n            hasDecision: false,\n            message: ''\n        };\n    }\n\n    // return {\n    //     hasDecision: false,\n    //     message: ''\n    // };\n}\n\nfunction defineOptions(tunnelOriginator) {\n    const optionRows = [];\n\n    optionRows.push(...[\n        {\n            \"type\": \"reply\",\n            \"reply\": {\n                \"id\": \"id_bora\",\n                \"title\": \"Bora!\"\n            }\n        },\n        {\n            \"type\": \"reply\",\n            \"reply\": {\n                \"id\": \"id_agora_nao\",\n                \"title\": \"Agora, não.\"\n            }\n        }\n    ]);\n\n    return {\n        \"recipient_type\": \"individual\",\n        \"type\": \"interactive\",\n        \"interactive\": {\n            \"type\": \"button\",\n            \"body\": {\n                \"text\": \"Vamos lá? 😃\"\n            },\n            \"action\": {\n                \"buttons\": optionRows\n            }\n        }\n    }\n};",
            "inputVariables": [
              "tunnel.originator",
              "contact.extras.isQuizAnswered",
              "hasCupons",
              "ignoreQuizToAnswer",
              "resource.magicAudiosCupomDeliveredList",
              "contact.extras.magicAudiosUserTries"
            ],
            "outputVariable": "menuOptionMessagePromotion",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "6cbff103-6bda-413e-ad19-34b66a997550",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Set Menu Option Message Promotion Decision",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(menuOptionMessagePromotion) {\n    menuOptionMessagePromotion = JSON.parse(menuOptionMessagePromotion);\n    return menuOptionMessagePromotion.hasDecision;\n}",
            "inputVariables": ["menuOptionMessagePromotion"],
            "outputVariable": "menuOptionMessagePromotionDecision",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "a4ece9e3-60aa-4e0b-be73-49d3725ab18a",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-a6f5421a-3f9b-4bca-a045-8def331fb20e",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-fe67edcc-9d6f-4687-8e7c-9fb7b1d93675",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        }
      ],
      "id": "8890d892-438a-4502-af30-f9d5f0b8d1d6",
      "root": false,
      "$title": "[PCR] MENU - Generate Main Menu",
      "$position": { "top": "1748px", "left": "1610.62px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "02daa1bc-bed6-47bd-8dd3-e08f7214c5ab": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "61b45268-8edc-4108-9c2b-0f6049c8e22f",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "de4adbc2-5d4f-4fc9-af76-06137f6f93e2",
          "typeOfStateId": "state",
          "$connId": "con_133",
          "$id": "07ba05e4-395e-4d86-95f4-32748c2429d0",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "a5e78402-0358-40f7-a822-9947cd8b371f",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Update Invalid Names List",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(invalidNamesList, username, user) {\n    invalidNamesList = invalidNamesList.toLowerCase();\n    username =  username.toLowerCase();\n    if(!invalidNamesList.includes(username)){\n        invalidNamesList += '\\n'+ user + ' - ' + username;\n    }\n    return invalidNamesList.toUpperCase();\n}",
            "inputVariables": [
              "resource.invalidNamesList",
              "userName",
              "tunnel.originator"
            ],
            "outputVariable": "invalidNamesList",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "fbb40fcc-3ef5-4200-bdf9-71e11f647b06",
          "$typeOfContent": "",
          "type": "ProcessCommand",
          "$title": "[CMD] Set invalidNameList",
          "$invalid": false,
          "settings": {
            "to": "postmaster@msging.net",
            "method": "set",
            "resource": "{{invalidNamesList}}",
            "type": "text/plain",
            "uri": "/resources/invalidNamesList",
            "variable": "invalidNamesListUpdate"
          },
          "conditions": []
        },
        {
          "$id": "b5d591b0-87ce-4505-bb23-e339ae5202fb",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set counterName",
          "$invalid": false,
          "settings": { "variable": "counterName", "value": "1" },
          "conditions": [
            {
              "source": "context",
              "comparison": "notExists",
              "variable": "counterName",
              "values": []
            }
          ]
        },
        {
          "$id": "562184f0-4680-4485-a606-b86581cbd3af",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set Visitante name",
          "$invalid": false,
          "settings": { "variable": "userName", "value": "Visitante" },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "cffaa499-42e0-484e-a11e-627dc56770a2",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Optin - Pergunta Nome Fora da Base - A3",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Optin - Pergunta Nome inesperado - A2",
            "action": "Nome Fora da Base"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "de4adbc2-5d4f-4fc9-af76-06137f6f93e2",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-3777bc59-97d3-4dc1-81f6-7f9c1e16fcda",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-b074e33d-39c3-4864-bd12-86d2a53e1225",
          "label": "ProcessCommand",
          "background": "#FC91AE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-b631040d-34cc-452c-ba3a-46530368bb29",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-f7983e06-ca62-4abc-91dd-8ec7a45a841d",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        }
      ],
      "id": "02daa1bc-bed6-47bd-8dd3-e08f7214c5ab",
      "root": false,
      "$title": "[PCR] Update Invalid Names List",
      "$position": { "top": "1485px", "left": "1424px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "6ae824ca-08b1-41f9-9c92-4cb3035bd749": {
      "$contentActions": [
        {
          "action": {
            "$id": "fe370cfa-3da1-4682-a711-4f9aa7c49a91",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "c5772935-a64d-4b4b-bf4b-308966edf353",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "c5772935-a64d-4b4b-bf4b-308966edf353",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "d28b70b4-251a-4034-9c2e-f4e2929b4ad9",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "36257cb6-90e9-4f18-857a-c392609c4907",
              "type": "text/plain",
              "content": "{{messageContent}}",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "36257cb6-90e9-4f18-857a-c392609c4907",
                "type": "text/plain",
                "content": "{{messageContent}}"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "5a9aa146-d52b-4620-b5b2-a65b7c678d2e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "1cf6f327-2855-43d4-bb1d-02c3b3246f47",
          "typeOfStateId": "state",
          "$connId": "con_138",
          "$id": "d2da8c61-2c4b-47fc-b0ad-030582b32128",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "1cf6f327-2855-43d4-bb1d-02c3b3246f47",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-6d1796f4-ae35-4646-9a94-8886719811a4",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "6ae824ca-08b1-41f9-9c92-4cb3035bd749",
      "root": false,
      "$title": "[MSG] OPTIN - Show Visitante",
      "$position": { "top": "1812px", "left": "316px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "3748f0ba-b79e-4be1-a1f1-0c9db6ea1549": {
      "$contentActions": [
        {
          "action": {
            "$id": "2b846f8a-35b1-4bf6-b3a8-ad1eaee9d223",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "790acb00-5ad4-4a90-ba64-4c2cc643dc14",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "790acb00-5ad4-4a90-ba64-4c2cc643dc14",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "47b84de9-0ef1-4ca3-bb52-55994940e5bd",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "{{menu@type}}",
              "rawContent": "{{menu@content}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "5a9aa146-d52b-4620-b5b2-a65b7c678d2e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "91f7c8e9-9472-43eb-abfc-5da99e61d170",
          "typeOfStateId": "state",
          "$connId": "con_143",
          "$id": "e53d3253-1d09-4084-b5e7-7298d9a643fd",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "91f7c8e9-9472-43eb-abfc-5da99e61d170",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-bb6dbba4-a40f-4076-a000-bd989638305e",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "3748f0ba-b79e-4be1-a1f1-0c9db6ea1549",
      "root": false,
      "$title": "[MSG] MENU - Show Menu",
      "$position": { "top": "1929px", "left": "1613px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "7a32ee70-b8a9-40b0-8400-8f3bb56c4270": {
      "$contentActions": [
        {
          "action": {
            "$id": "9e91ed3b-27b5-44f5-ac6a-73f65ac044bb",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "af1dafff-cc63-4d31-8186-1674a3791800",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "af1dafff-cc63-4d31-8186-1674a3791800",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "1b904b56-bbd5-443e-a7be-b0c2cfde8232",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "e98cb71f-e9fe-4d3a-8964-46ffb67c8b71",
              "type": "text/plain",
              "content": "{{messageContent}}",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "e98cb71f-e9fe-4d3a-8964-46ffb67c8b71",
                "type": "text/plain",
                "content": "{{messageContent}}",
                "metadata": {}
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "5a9aa146-d52b-4620-b5b2-a65b7c678d2e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "edabdc75-1247-4ffb-aa3a-9d3f2562034d",
          "typeOfStateId": "state",
          "$connId": "con_148",
          "$id": "025626e7-7064-4176-a0a0-5eb633aae868",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "edabdc75-1247-4ffb-aa3a-9d3f2562034d",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-8eaa7a26-162a-4b1c-878d-67665f2b93f8",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "7a32ee70-b8a9-40b0-8400-8f3bb56c4270",
      "root": false,
      "$title": "[MSG] OPTIN - Show LastName",
      "$position": { "top": "2038.57px", "left": "707.714px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "edabdc75-1247-4ffb-aa3a-9d3f2562034d": {
      "$contentActions": [
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "e00aacdb-169a-43fd-80a9-008345395292",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "userLastName"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "variable": "userLastName"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "b2a2f612-8c47-413a-b781-21535e9c7a2b",
          "typeOfStateId": "state",
          "$connId": "con_153",
          "$id": "77523b4f-28f0-4f4d-a37d-b33b18d8d020",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "45f10084-d8d3-4e95-a534-93370a267fc5",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Optin - Pergunta sobrenome - A3",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Optin - Pergunta sobrenome - A3",
            "action": "Perguntar sobrenome"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "b2a2f612-8c47-413a-b781-21535e9c7a2b",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-29feb6eb-e1fd-4956-9b91-fe496a212a54",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-69c5be23-8ce8-4f3a-8175-af4498d666fc",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "edabdc75-1247-4ffb-aa3a-9d3f2562034d",
      "root": false,
      "$title": "[IN] User LastName",
      "$position": { "top": "2210px", "left": "507px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "1cf6f327-2855-43d4-bb1d-02c3b3246f47": {
      "$contentActions": [
        {
          "action": {
            "$id": "dd00ea66-b2be-4d99-aa9f-58930d9c4952",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "72597076-e370-4148-b3fd-7f14dce6e8fa",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "72597076-e370-4148-b3fd-7f14dce6e8fa",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "a52eb94b-fc38-4ac3-a43f-0bd89c7884ef",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "ca0c3abc-fb76-458e-8f3d-2475ed7d6a3d",
              "type": "text/plain",
              "content": "E o seu {{channelTextTags@open}}e-mail{{channelTextTags@close}} qual é?",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "ca0c3abc-fb76-458e-8f3d-2475ed7d6a3d",
                "type": "text/plain",
                "content": "E o seu {{channelTextTags@open}}e-mail{{channelTextTags@close}} qual é?"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "5a9aa146-d52b-4620-b5b2-a65b7c678d2e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "e50f2217-a96c-4f91-b77d-35f60ef9dfac",
          "typeOfStateId": "state",
          "$connId": "con_158",
          "$id": "80946b3b-ec9e-41cd-a5d7-73c8496ca5ad",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "e50f2217-a96c-4f91-b77d-35f60ef9dfac",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-28b7a8f0-d1e8-4439-a167-4a153510b416",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "1cf6f327-2855-43d4-bb1d-02c3b3246f47",
      "root": false,
      "$title": "[MSG] OPTIN - Show Email",
      "$position": { "top": "2037.89px", "left": "247px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "e50f2217-a96c-4f91-b77d-35f60ef9dfac": {
      "$contentActions": [
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "e00aacdb-169a-43fd-80a9-008345395292",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "userEmail"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "variable": "userEmail"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "6e776892-e8cd-4724-8c3f-4f240b8c915f",
          "typeOfStateId": "state",
          "$connId": "con_163",
          "$id": "23e9f497-5189-4bda-84b9-f42a8d40e61f",
          "conditions": [
            {
              "source": "input",
              "comparison": "matches",
              "values": [
                "^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$"
              ]
            },
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "haveTeste",
              "values": ["true"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "93144784-f743-4bbc-b5d0-2b3c90cd5767",
          "typeOfStateId": "state",
          "$connId": "con_168",
          "$id": "e0dc8790-25db-422f-9b3d-a303aa774340",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "388ab019-32de-40ea-8ac9-8ca6d4989a4c",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Validate userEmail",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(userEmail) {\n    let haveTeste\n    userEmail = userEmail.toUpperCase();\n    if(userEmail.includes(\"@TESTE\")  || userEmail.includes(\"@KORAMAIL\") || userEmail.includes(\"@TEST\")){\n        haveTeste = true;\n    }\n    return haveTeste\n}",
            "inputVariables": ["userEmail"],
            "outputVariable": "haveTeste"
          },
          "conditions": []
        },
        {
          "$id": "f3563926-faa0-46e5-ad5e-360849828693",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Optin - Pergunta email - A4",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Optin - Pergunta email - A4",
            "action": "Perguntar email"
          },
          "conditions": []
        },
        {
          "$id": "213af691-cea6-4ad5-9724-f73f1909f868",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] - Trim userEmail",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(userEmail) {\n    return userEmail.trim();\n}",
            "inputVariables": ["userEmail"],
            "outputVariable": "userEmail"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "background": "#EA4D9C",
          "label": "Tracking",
          "id": "blip-tag-19cff111-5b09-1b10-fac4-3234574858d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-dda851bd-5b72-4cfb-a219-96f27461f6f4",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-c90b738b-49ed-4873-a6f6-c49521959dda",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-574fd72e-0760-4447-bc60-7ef564a00dea",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "e50f2217-a96c-4f91-b77d-35f60ef9dfac",
      "root": false,
      "$title": "[IN] OPTIN - Email",
      "$position": { "top": "1916.27px", "left": "923.273px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "b2a2f612-8c47-413a-b781-21535e9c7a2b": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "23b74ba8-e1ad-426d-87c1-f559817a2057",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "userName"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "variable": "userName"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "ab6780c8-170b-4f66-99d0-6eca3f2da0ba",
          "typeOfStateId": "state",
          "$connId": "con_173",
          "$id": "a6b78bc2-3054-4cbf-894a-f67dd2360be3",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isInputValid"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "9025f34b-09db-4388-ba4f-679042c4b07a",
          "typeOfStateId": "state",
          "$connId": "con_178",
          "$id": "c4301dab-4f05-494f-ad11-7317f398eee1",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["false"],
              "variable": "isInputValid"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "a90bcb74-40b1-43b5-a1a9-c0cfc371d58a",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Check Deny List",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(denyList, textInput){\n   let regexDeny = new RegExp('\\\\b('+denyList+')\\\\b','gi');\n   textInput=textInput.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n   const matches = textInput.match(regexDeny);\n   return matches ? false : true;\n}\n",
            "inputVariables": ["resource.denyList", "userLastName"],
            "outputVariable": "isInputValid",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-facc0f98-fe22-411d-907d-c94233c12e52",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "b2a2f612-8c47-413a-b781-21535e9c7a2b",
      "root": false,
      "$title": "[PCR] Verify If LastName Is On Deny",
      "$position": { "top": "2363px", "left": "785px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "1b28b8fb-6b2b-4358-953e-72dc4103708a": {
      "$contentActions": [
        {
          "action": {
            "$id": "fe370cfa-3da1-4682-a711-4f9aa7c49a91",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "c5772935-a64d-4b4b-bf4b-308966edf353",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "c5772935-a64d-4b4b-bf4b-308966edf353",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "d28b70b4-251a-4034-9c2e-f4e2929b4ad9",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "36257cb6-90e9-4f18-857a-c392609c4907",
              "type": "text/plain",
              "content": "Qual é a sua {{channelTextTags@open}}data de nascimento{{channelTextTags@close}}?",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "36257cb6-90e9-4f18-857a-c392609c4907",
                "type": "text/plain",
                "content": "Qual é a sua {{channelTextTags@open}}data de nascimento{{channelTextTags@close}}?"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "5a9aa146-d52b-4620-b5b2-a65b7c678d2e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "7a105e91-bc2a-4e38-b609-1dc4e0e0a408",
          "typeOfStateId": "state",
          "$connId": "con_183",
          "$id": "2aebbbfd-07fb-436e-90d8-5d9f7755aaac",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "e50f2217-a96c-4f91-b77d-35f60ef9dfac",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-0d8b875f-3e8e-44bd-92a9-03b5e94c0727",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "1b28b8fb-6b2b-4358-953e-72dc4103708a",
      "root": false,
      "$title": "[MSG] OPTIN - Show Birth",
      "$position": { "top": "2282px", "left": "1121px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "93144784-f743-4bbc-b5d0-2b3c90cd5767": {
      "$contentActions": [
        {
          "action": {
            "$id": "22902e24-d7fa-4ef7-8f68-26ffcb8488d8",
            "type": "SendMessage",
            "settings": {
              "id": "0e2ca1cf-25df-4d53-99df-1ad6b8452ed2",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "0e2ca1cf-25df-4d53-99df-1ad6b8452ed2",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "08dd9f07-d538-41ba-ae53-32f5ddf0e73e",
            "type": "SendMessage",
            "settings": {
              "id": "b8aed230-106b-45fa-8f0c-245e9a9c4eb4",
              "type": "text/plain",
              "content": "{{Isso não tá me parecendo um endereço de e-mail válido. 🤔 Os e-mails costumam ter @. Digita ele de novo, por favor. | Poxa, não deu pra reconhecer esse e-mail… \n\nVamos tentar de novo! 😉\n\nSeu e-mail deve ser algo como: seunome@koramail.com.br}}",
              "metadata": { "#message.spinText": "true" }
            },
            "$cardContent": {
              "document": {
                "id": "b8aed230-106b-45fa-8f0c-245e9a9c4eb4",
                "type": "text/plain",
                "content": "{{Isso não tá me parecendo um endereço de e-mail válido. 🤔 Os e-mails costumam ter @. Digita ele de novo, por favor. | Poxa, não deu pra reconhecer esse e-mail… \n\nVamos tentar de novo! 😉\n\nSeu e-mail deve ser algo como: seunome@koramail.com.br}}"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "aaefb989-3409-482e-8ff7-0b1bf22bbbdf",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "email"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "variable": "email"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "e50f2217-a96c-4f91-b77d-35f60ef9dfac",
          "$connId": "con_188",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false,
          "$id": "56dd643b-294b-483d-93e1-c05a72514c5c",
          "typeOfStateId": "state"
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "9e77fd10-9870-4500-8435-267486006e74",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Optin - Pergunta email inesperado - A4",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Optin - Pergunta email inesperado - A4",
            "action": "Email fora do padrão"
          },
          "conditions": []
        },
        {
          "$id": "fc686aa6-f80b-4b54-a799-0921d762ca8d",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Increment access flow counter",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(accessFlow) {\n    accessFlow = accessFlow ? parseInt(accessFlow) : 0;\n    return accessFlow+1;\n}",
            "inputVariables": ["contact.extras.excepctionFlowMain"],
            "outputVariable": "accessFlow",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [],
          "continueOnError": true
        },
        {
          "$id": "ce36f7f1-cf80-4344-b8af-6c92aac02010",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Set excepctionFlowInfo",
          "$invalid": false,
          "settings": { "extras": { "excepctionFlowMain": "{{accessFlow}}" } },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-c89ecf67-683d-4207-b859-95a525c34b91",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-9baa8148-45a0-474e-b121-e4668d788b51",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-36b289ab-662f-4d11-8546-1b27742de11f",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-62edc364-a959-4619-b44c-75cc62a8632d",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "93144784-f743-4bbc-b5d0-2b3c90cd5767",
      "root": false,
      "$title": "[EXP] OPTIN - Email Invalid",
      "$position": { "top": "1972px", "left": "1143px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "60282a85-cdc6-48be-90c5-8edd8728d3d8": {
      "$contentActions": [
        {
          "action": {
            "$id": "9fc90c91-fa0e-489f-9511-a54204188a03",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "f0fc5e8c-e185-4e14-9174-346c0bf145b6",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "f0fc5e8c-e185-4e14-9174-346c0bf145b6",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "5301df8a-8bcb-4dbd-bbf4-4218bee04318",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "6f5e53c5-8a42-40e6-af08-657cc9a50796",
              "type": "text/plain",
              "content": "Desculpe, não consegui entender! Eu sou uma robô muito inteligente mas ainda tem muita coisa pra eu aprender.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "6f5e53c5-8a42-40e6-af08-657cc9a50796",
                "type": "text/plain",
                "content": "Desculpe, não consegui entender! Eu sou uma robô muito inteligente mas ainda tem muita coisa pra eu aprender."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "e6b12066-0352-4c68-ae2e-628e73ca5b70",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "{{lastblock}}",
          "typeOfStateId": "variable",
          "$id": "16aac4ad-ca4f-4351-9cdf-bd59d398d16a",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-1a998fe0-547d-4448-a206-bab562b8e783",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "60282a85-cdc6-48be-90c5-8edd8728d3d8",
      "root": false,
      "$title": "[EXP] GENERIC - Generic Exception",
      "$position": { "top": "489px", "left": "1104px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "7a105e91-bc2a-4e38-b609-1dc4e0e0a408": {
      "$contentActions": [
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "5aefdb85-3295-4527-b42a-1609b21197d5",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "userBirth"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "variable": "userBirth"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "0bd5fbf6-056a-4b77-827b-e28789d82bf9",
          "typeOfStateId": "state",
          "$connId": "con_193",
          "$id": "bc532fa6-b678-4f48-b13d-4aec0dd7d32e",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isInputValid"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "b9a6cb3c-6405-46cb-bd92-77b327cb58f8",
          "typeOfStateId": "state",
          "$connId": "con_198",
          "$id": "ad7879a0-afe1-4e4c-bb22-0137ff32f2f7",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["false"],
              "variable": "isInputValid"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "629cede0-e0a5-44b5-a1af-c9dcf4c9d7cc",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Validate Birhdate",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(birthdate) {\n    birthdate = birthdate.trim();\n    let regex = new RegExp(/^(?:(?:31(\\/|-|\\.|\\ )(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.|\\ )(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.|\\ )0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.|\\ )(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$/gmi);\n    let result = regex.test(birthdate);\n    if(result) return result;\n    regex = new RegExp(/^(?:0[1-9]|[1-9]|[1-2][0-9]|3[01]) (de )?\\b(?:Jan(?:eiro)?|Fev(?:ereiro)?|Mar(?:ço)?|Mar(?:co)?|Abr(?:il)?|Maio|Jun(?:ho)?|Jul(?:ho)?|Ago(?:sto)?|Set(?:embro)?|Out(?:ubro)?|Nov(?:embro)?|Dez(?:embro)?)\\b (de )?\\d{2,4}$/gmi);\n    result = regex.test(birthdate);\n    return result; \n}",
            "inputVariables": ["userBirth"],
            "outputVariable": "isInputValid"
          },
          "conditions": []
        },
        {
          "$id": "9bfbfc53-d557-46c3-9de6-daaac35948aa",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Format UserBirth",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function formatDateWithWrittenMonth(birthdate){\n    let months = {\n\t\"janeiro\": \"1\",\n\t\"jan\":\"1\",\n\t\"fevereiro\": \"2\",\n\t\"fev\": \"2\",\n\t\"marco\": \"3\",\n\t\"março\":\"3\",\n\t\"mar\":\"3\",\n\t\"abril\":\"4\",\n\t\"abr\":\"4\",\n\t\"maio\":\"5\",\n\t\"junho\":\"6\",\n\t\"jun\":\"6\",\n\t\"julho\":\"7\",\n\t\"jul\":\"7\",\n\t\"agosto\": \"8\",\n\t\"ago\": \"8\",\n\t\"setembro\": \"9\",\n\t\"set\": \"9\",\n\t\"outubro\": \"'10\",\n\t\"out\": \"10\",\n\t\"novembro\": \"11\",\n\t\"nov\": \"11\",\n\t\"dezembro\": \"12\",\n\t\"dez\": \"12\"\n    };\n    birthdate = (birthdate).replace(/\\bde\\b/g,'').split(' ');\n    birthdate = birthdate.filter(x => x != '');\n    birthdate[1] = months[birthdate[1].toLowerCase()];\n    return birthdate.join('/');\n}\n\nfunction run(birthdate, currentYear) {\n    currentYear = currentYear.slice(2);\t\n\tlet regexLetter = /[a-zA-Z]/g;\n\n\tif(!regexLetter.test(birthdate)) {\n    \tbirthdate = birthdate.replace(/\\/|-|\\.|\\ /g, '/');\n\t} else {\n        birthdate=formatDateWithWrittenMonth(birthdate);\n    }\n\n    let birthdateYear = birthdate.split('/')[2];\n    if(birthdateYear.length == 2){\n        birthdate = birthdate.split('/');\n\n        if(birthdateYear > currentYear){\n            birthdate[2] = '19'+birthdateYear;\n        }\n        else{\n            birthdate[2] = '20'+birthdateYear;\n        }\n        birthdate = birthdate.join('/');    \n    }\n    return birthdate;\n}",
            "inputVariables": ["userBirth", "calendar.year"],
            "outputVariable": "userBirth"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "isInputValid",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "c420da84-684e-4f35-9d56-32a93027eec5",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Optin - Pergunta nascimento - A5",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Optin - Pergunta nascimento - A5",
            "action": "Perguntar data de nascimento"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-e057b296-c17a-4879-a0cc-738cd8c728c2",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-e0917f2d-ad9c-48de-b2b2-6da929862b32",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-f54fe418-e6b0-42ba-bcaa-c0a7211674f9",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "7a105e91-bc2a-4e38-b609-1dc4e0e0a408",
      "root": false,
      "$title": "[IN] OPTIN - Birthdate",
      "$position": { "top": "2354px", "left": "1329px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "b9a6cb3c-6405-46cb-bd92-77b327cb58f8": {
      "$contentActions": [
        {
          "action": {
            "$id": "22902e24-d7fa-4ef7-8f68-26ffcb8488d8",
            "type": "SendMessage",
            "settings": {
              "id": "0e2ca1cf-25df-4d53-99df-1ad6b8452ed2",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "0e2ca1cf-25df-4d53-99df-1ad6b8452ed2",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "08dd9f07-d538-41ba-ae53-32f5ddf0e73e",
            "type": "SendMessage",
            "settings": {
              "id": "b8aed230-106b-45fa-8f0c-245e9a9c4eb4",
              "type": "text/plain",
              "content": "Não entendi essa data que você disse. 🤔",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "b8aed230-106b-45fa-8f0c-245e9a9c4eb4",
                "type": "text/plain",
                "content": "Não entendi essa data que você disse. 🤔"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "014fb360-f485-4db3-be6a-824384379e3a",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "24aa1f55-ea6b-47cc-a04c-082af9ad9453",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "24aa1f55-ea6b-47cc-a04c-082af9ad9453",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "dc3f5565-9d4a-4760-bb7a-80dadc784d60",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "bdb6aa45-de2b-4dad-992a-6dfa3681aae3",
              "type": "text/plain",
              "content": "Me fala de novo, por favor. Você pode seguir o formato: 18/04/1942",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "bdb6aa45-de2b-4dad-992a-6dfa3681aae3",
                "type": "text/plain",
                "content": "Me fala de novo, por favor. Você pode seguir o formato: 18/04/1942"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "aaefb989-3409-482e-8ff7-0b1bf22bbbdf",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "email"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "variable": "email"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "7a105e91-bc2a-4e38-b609-1dc4e0e0a408",
          "$connId": "con_203",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false,
          "$id": "56dd643b-294b-483d-93e1-c05a72514c5c",
          "typeOfStateId": "state"
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "363c0174-5912-42e4-b06e-b33b2d10b607",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Optin - Pergunta nascimento inesperado - A5",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Optin - Pergunta nascimento inesperado - A5",
            "action": "Data fora do padrão"
          },
          "conditions": []
        },
        {
          "$id": "fc686aa6-f80b-4b54-a799-0921d762ca8d",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Increment access flow counter",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(accessFlow) {\n    accessFlow = accessFlow ? parseInt(accessFlow) : 0;\n    return accessFlow+1;\n}",
            "inputVariables": ["contact.extras.excepctionFlowMain"],
            "outputVariable": "accessFlow",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [],
          "continueOnError": true
        },
        {
          "$id": "ce36f7f1-cf80-4344-b8af-6c92aac02010",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Set excepctionFlowInfo",
          "$invalid": false,
          "settings": { "extras": { "excepctionFlowMain": "{{accessFlow}}" } },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "7a105e91-bc2a-4e38-b609-1dc4e0e0a408",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-eac80d0b-2319-4712-a1f3-b2aa9c4d5737",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-fca0a377-3417-45b3-8895-e2c2f00fe5cc",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-e4144b60-e071-4dc5-b658-420e558dabc8",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-de4621e2-e2a0-436f-aa60-3e22f852fde3",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "b9a6cb3c-6405-46cb-bd92-77b327cb58f8",
      "root": false,
      "$title": "[EXP] OPTIN - Birthdate Invalid",
      "$position": { "top": "2357px", "left": "1581px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "d7a5a0c5-98be-4f08-901d-bb356b2ba00a": {
      "$contentActions": [
        {
          "action": {
            "$id": "4450a217-d8a9-492a-b948-13785c774f61",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "63d4a60d-adb4-4657-80fb-a7373b9d4468",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "63d4a60d-adb4-4657-80fb-a7373b9d4468",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "578683d1-e5e6-405d-8dd9-8f16e01a1e38",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "a3afe827-65d5-4a8f-8a1e-9c7857b67e40",
              "type": "text/plain",
              "content": "Beleza.\n\nObrigada pelas respostas! 😊",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "a3afe827-65d5-4a8f-8a1e-9c7857b67e40",
                "type": "text/plain",
                "content": "Beleza.\n\nObrigada pelas respostas! 😊"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "7708c17b-7914-42b6-89e2-f2db6a106b7d",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "2b9995a9-ebf0-40ba-8af1-41a51381b359",
          "typeOfStateId": "state",
          "$connId": "con_208",
          "$id": "f72c81c6-66e3-42d5-b63c-50e11bd19d86",
          "conditions": [
            {
              "source": "context",
              "comparison": "startsWith",
              "values": ["#"],
              "variable": "firstIntent"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "8890d892-438a-4502-af30-f9d5f0b8d1d6",
          "typeOfStateId": "state",
          "$connId": "con_213",
          "$id": "5c2619f2-5a44-4923-ba20-f587fdffe2ba",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "8890d892-438a-4502-af30-f9d5f0b8d1d6",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-5aef3dbd-2cbe-47e9-9b9c-314648a4a889",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "d7a5a0c5-98be-4f08-901d-bb356b2ba00a",
      "root": false,
      "$title": "[MSG] OPTIN - Show Thanks Message",
      "$position": { "top": "1660px", "left": "1341px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "91f7c8e9-9472-43eb-abfc-5da99e61d170": {
      "$contentActions": [
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "a813e9cc-d50f-40bc-b444-3ab1dbc6a33b",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "56214f2c-76e6-4c66-9aea-2541f682d833",
          "typeOfStateId": "state",
          "$connId": "con_218",
          "$id": "8e118fa2-1fe6-45f6-b3eb-8a56a9ceccf2",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Quiz Copa do Mundo 🏆"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "7a395591-5303-4eaa-88a2-f0e2dae3c698",
          "typeOfStateId": "state",
          "$connId": "con_223",
          "$id": "7cfa1ea8-73f9-4ba7-9584-fda8035ddbf2",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Áudios Mágicos ✨"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "7a395591-5303-4eaa-88a2-f0e2dae3c698",
          "typeOfStateId": "state",
          "$connId": "con_228",
          "$id": "ebf61b09-659c-463b-8206-f8e8f58efeb5",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["Input Inesperado"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "352c9afa-44cd-44fb-8fa2-bdad41aa5362",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] SET USERACTION",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_inputProcessingFunction}}\n\nfunction run(inputContent, menuOptions) {\n    return getSelectedMenuOption(inputContent, 'text/plain', menuOptions);\n}\n\nfunction getSelectedMenuOption(inputContent, inputType, menuOptions) {\n    let options = [];\n    menuOptions = JSON.parse(menuOptions);\n    menuOptions.options.forEach(x =>{\n        options.push(\n            {\n                \"regex\": x.valideOptions,\n                \"value\": x.name\n            }\n        )\n    });\n    let props = {\n        input: inputContent,\n        inputType,\n        options\n    };\n    let config = {\n        isNumberMenu: true,\n        isReversed: false,\n        shouldRemoveSpecialCharacters: true,\n        shouldRemoveWhiteSpaces: false\n    };\n    let selectedMenuOption = validateInputOptions(props, config);\n    let option = menuOptions.options.find(x => x.name == selectedMenuOption.value);\n\n    if(option) {\n    selectedMenuOption.service = option.service;\n    selectedMenuOption.sendMessage = option.sendMessage;\n    }\n    \n    return selectedMenuOption;\n}",
            "inputVariables": ["input.content", "menuOptions"],
            "outputVariable": "userAction"
          },
          "conditions": [],
          "continueOnError": true
        },
        {
          "$id": "e46ada14-01ff-45d0-8c5a-e0b29fb5c29c",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Set Destiny",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(userAction) {\n    userAction = JSON.parse(userAction);\n\n    let destiny = {\n        destinyBot: userAction.service,\n        input: userAction.input,\n        blockStateId: userAction.blockStateId,\n        sendMessage: userAction.sendMessage\n    }\n\n    return destiny;\n}",
            "inputVariables": ["userAction"],
            "outputVariable": "destiny"
          },
          "conditions": []
        },
        {
          "$id": "5f253764-bb99-4824-90d2-f5e1a9ce0e85",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Menu - Escolha Menu - B10",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Menu - Escolha Menu - B10",
            "action": "{{userAction@value}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "userAction@value",
              "values": ["Input Inesperado"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-8393bfa1-76a3-40a1-b8b4-89a7a9870874",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-57364dcb-c13a-4661-8efb-f91b890195d7",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-b86ba8f7-026b-4f32-91d6-dba7ea6daab6",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "91f7c8e9-9472-43eb-abfc-5da99e61d170",
      "root": false,
      "$title": "[IN] MENU - Menu",
      "$position": { "top": "2117.25px", "left": "1798.56px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "7a395591-5303-4eaa-88a2-f0e2dae3c698": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "b67556c8-5f68-42fa-b840-81d6152741c8",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "ba82e1b5-5aed-44fc-bb93-369e0e502fdc",
          "$typeOfContent": "",
          "type": "Redirect",
          "$title": "[RDT] Redirect to Selected option",
          "$invalid": false,
          "settings": {
            "context": {
              "type": "text/plain",
              "value": "{{destiny@sendMessage}}"
            },
            "address": "{{destiny@destinyBot}}"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-c5fa41be-d269-4142-8629-b7e308bbb99d",
          "label": "Redirect",
          "background": "#1EA1FF",
          "canChangeBackground": false
        }
      ],
      "id": "7a395591-5303-4eaa-88a2-f0e2dae3c698",
      "root": false,
      "$title": "[RDT] - REDIRECT",
      "$position": { "top": "1921.33px", "left": "2135.44px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "de4adbc2-5d4f-4fc9-af76-06137f6f93e2": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "7f076cd3-2c9b-4d76-9967-fb4b2223b986",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "40a7fe7a-b550-4421-994e-d96fc15208b3",
          "typeOfStateId": "state",
          "$connId": "con_233",
          "$id": "aeb84a1a-37f8-477a-b57b-fb181743ef23",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isInputValid@isValid"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "9025f34b-09db-4388-ba4f-679042c4b07a",
          "typeOfStateId": "state",
          "$connId": "con_238",
          "$id": "a8343780-fddf-4060-9e34-aed0ceda9377",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "fe166cc0-1a32-44e8-9872-0846e43be4b3",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Save UserName",
          "$invalid": false,
          "settings": { "extras": {}, "name": "{{userName}}" },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "9025f34b-09db-4388-ba4f-679042c4b07a",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-522735b3-24e4-4742-ace6-043f5c1912ea",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        }
      ],
      "id": "de4adbc2-5d4f-4fc9-af76-06137f6f93e2",
      "root": false,
      "$title": "[PCR] Save UserName Contact",
      "$position": { "top": "1300.12px", "left": "938.625px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "ab6780c8-170b-4f66-99d0-6eca3f2da0ba": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "7f076cd3-2c9b-4d76-9967-fb4b2223b986",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "1cf6f327-2855-43d4-bb1d-02c3b3246f47",
          "typeOfStateId": "state",
          "$connId": "con_243",
          "$id": "a8343780-fddf-4060-9e34-aed0ceda9377",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "fe166cc0-1a32-44e8-9872-0846e43be4b3",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Save UserLastName",
          "$invalid": false,
          "settings": { "extras": { "Sobrenome": "{{userLastName}}" } },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-386e7ae3-403d-4eb3-9986-a35f3f137b97",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        }
      ],
      "id": "ab6780c8-170b-4f66-99d0-6eca3f2da0ba",
      "root": false,
      "$title": "[PCR] Save UserLastName Contact",
      "$position": { "top": "2331px", "left": "318px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "a0e44f79-7404-4ee2-a4ca-ad52a2faa885": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "7f076cd3-2c9b-4d76-9967-fb4b2223b986",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "068a21f7-5994-48f6-a881-26add45559d4",
          "typeOfStateId": "state",
          "$connId": "con_248",
          "$id": "00962f7e-ecc9-495c-91c6-7b14e4407cbf",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "fe166cc0-1a32-44e8-9872-0846e43be4b3",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Save Birthdate",
          "$invalid": false,
          "settings": { "extras": { "Aniversário": "{{userBirth}}" } },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-2872f7d8-04a8-4d83-8a99-5fe85d2871ee",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        }
      ],
      "id": "a0e44f79-7404-4ee2-a4ca-ad52a2faa885",
      "root": false,
      "$title": "[PCR] Save userBirthdate Contact",
      "$position": { "top": "2157px", "left": "1334px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "6e776892-e8cd-4724-8c3f-4f240b8c915f": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "7f076cd3-2c9b-4d76-9967-fb4b2223b986",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "d7a5a0c5-98be-4f08-901d-bb356b2ba00a",
          "typeOfStateId": "state",
          "$connId": "con_253",
          "$id": "da24b03d-cf4e-4535-ad68-4b2c57ae00e4",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "fe166cc0-1a32-44e8-9872-0846e43be4b3",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Save email",
          "$invalid": false,
          "settings": { "extras": {}, "email": "{{userEmail}}" },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "1b28b8fb-6b2b-4358-953e-72dc4103708a",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-28be6880-1ef2-4c76-848b-0d224ec97059",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        }
      ],
      "id": "6e776892-e8cd-4724-8c3f-4f240b8c915f",
      "root": false,
      "$title": "[PCR] Save email Contact",
      "$position": { "top": "2124px", "left": "902px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "aaf112f2-d573-430b-b54e-8c05cd49c5f9": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "8a295040-34cc-4d7e-a3a2-8b4ff908ae8b",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "b171abf9-d65c-4b66-9d37-3905fdb46106",
          "typeOfStateId": "state",
          "$connId": "con_258",
          "$id": "376c3b24-14d5-40f1-a4d8-7f490e8761d7",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "db9a8eeb-c4f3-4d33-b0c0-bb04adf93011",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "\nfunction run(contentTypes, userChannel, channelTextTags) {\n    contentTypes = JSON.parse(contentTypes);\n    channelTextTags = JSON.parse(channelTextTags);\n    const text = `Poxa! 😕${channelTextTags.breakline}Assim a gente ${channelTextTags.open}não consegue${channelTextTags.close} continuar.${channelTextTags.breakline}${channelTextTags.breakline}Se você decidir ${channelTextTags.open}aceitar os termos${channelTextTags.close}, fala comigo de novo! `;\n    return { content: text };\n}",
            "inputVariables": [
              "contentTypes",
              "userChannel",
              "channelTextTags"
            ],
            "outputVariable": "messageContent"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "b171abf9-d65c-4b66-9d37-3905fdb46106",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-8b49dc60-b5b1-49f5-9a3f-57830955e727",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "aaf112f2-d573-430b-b54e-8c05cd49c5f9",
      "root": false,
      "$title": "[PCR] OPTIN - Generate Terms Not Accepted",
      "$position": { "top": "681px", "left": "846px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "068a21f7-5994-48f6-a881-26add45559d4": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "8a295040-34cc-4d7e-a3a2-8b4ff908ae8b",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "2ee65e03-12de-4ce6-8717-32dd4bbec9f8",
          "typeOfStateId": "state",
          "$connId": "con_263",
          "$id": "304ddf60-ee8a-4553-abd7-1645938d5a78",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "db9a8eeb-c4f3-4d33-b0c0-bb04adf93011",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "\nfunction run(contentTypes, userChannel, channelTextTags) {\n    contentTypes = JSON.parse(contentTypes);\n    channelTextTags = JSON.parse(channelTextTags);\n    const text = `Legal! ✨${channelTextTags.breakline}Qual é o seu ${channelTextTags.open}primeiro nome${channelTextTags.close}? `\n    return text;\n}",
            "inputVariables": [
              "contentTypes",
              "userChannel",
              "channelTextTags"
            ],
            "outputVariable": "messageContent"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "2ee65e03-12de-4ce6-8717-32dd4bbec9f8",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-7a865318-69be-42ce-a093-1ce6b8f16af3",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "068a21f7-5994-48f6-a881-26add45559d4",
      "root": false,
      "$title": "[PCR] OPTIN - Generate Name Message",
      "$position": { "top": "1134px", "left": "348px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "0bd5fbf6-056a-4b77-827b-e28789d82bf9": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "1628f361-6c8e-4f01-9b14-fda5330f83a3",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "typeOfStateId": "state",
          "$connId": "con_268",
          "$id": "7203d680-fce3-4b4a-8d1d-073f58b3ff59",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAgeBigger18"
            }
          ],
          "$invalid": false,
          "stateId": "a0e44f79-7404-4ee2-a4ca-ad52a2faa885"
        },
        {
          "stateId": "38e78036-2a3f-4d73-8cdb-f504554865a3",
          "typeOfStateId": "state",
          "$connId": "con_273",
          "$id": "594c7c2d-b4fb-468d-8b8f-51e70c1e063a",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["false"],
              "variable": "isAgeBigger18"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "288ad16a-4175-4e5a-8ace-ae8755c27242",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Validate Age",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(currentYear, currentMonth, currentDay, userBirth) {\n    let year = parseInt(userBirth.split('/')[2]);\n    let month = parseInt(userBirth.split('/')[1]);\n    let day = parseInt(userBirth.split('/')[0]);\n    \n    let age = currentYear - year;\n\n    let monthDiff = currentMonth - month;\n    if (monthDiff < 0 || (monthDiff === 0 && currentDay < day)) {\n        age--;\n    }\n\n    return (age >= 18);\n}",
            "inputVariables": [
              "calendar.year",
              "calendar.month",
              "calendar.day",
              "userBirth"
            ],
            "outputVariable": "isAgeBigger18"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-c97c3bde-9af2-44aa-860a-d6a3909b4b69",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "0bd5fbf6-056a-4b77-827b-e28789d82bf9",
      "root": false,
      "$title": "[PCR] OPTIN - Validate Age",
      "$position": { "top": "2259.3px", "left": "1786.44px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false,
      "invalidOutputs": true
    },
    "38e78036-2a3f-4d73-8cdb-f504554865a3": {
      "$contentActions": [
        {
          "action": {
            "$id": "91a17cc4-3f52-49f9-b5e9-1aa14e6aa494",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "29bd9234-bf01-4810-9c19-6a6e3a507cd3",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "29bd9234-bf01-4810-9c19-6a6e3a507cd3",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "e77335dc-4862-49c3-8376-2370938835ff",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "b602acff-9b0d-4c87-a979-10aac43b398a",
              "type": "text/plain",
              "content": "Ah, você tem menos de 18 anos...\n\nNossa {{channelTextTags@open}}política de segurança de dados{{channelTextTags@close}} não permite contato com menores de idade.\n\n\nSe você quiser, pode pedir para seu responsável entrar em contato pelo meu Whatsapp.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "b602acff-9b0d-4c87-a979-10aac43b398a",
                "type": "text/plain",
                "content": "Ah, você tem menos de 18 anos...\n\nNossa {{channelTextTags@open}}política de segurança de dados{{channelTextTags@close}} não permite contato com menores de idade.\n\n\nSe você quiser, pode pedir para seu responsável entrar em contato pelo meu Whatsapp."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "73f85a24-74b2-4260-90e7-6f3e917f3242",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "5c4dc23b-2c85-4cf3-959c-232ea9cdfbec",
          "typeOfStateId": "state",
          "$connId": "con_278",
          "$id": "414c1e7b-2997-426c-8724-5117967b7f2a",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "77a58c62-93fe-49b3-aff4-df7562a547de",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Optin - Menor de Idade - C1",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Optin - Menor de Idade - C1",
            "action": "Menor de Idade"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "5c4dc23b-2c85-4cf3-959c-232ea9cdfbec",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-b9c83ca3-6842-4b0b-a934-868fda03504b",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-b3b99075-6a56-4a6e-841d-ea03756dbbaa",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-54fd90d1-5de5-4a85-96ff-11f6e2ff7b2b",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "38e78036-2a3f-4d73-8cdb-f504554865a3",
      "root": false,
      "$title": "[MSG] - Lower 18 years",
      "$position": { "top": "2253.78px", "left": "2040.34px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "5c4dc23b-2c85-4cf3-959c-232ea9cdfbec": {
      "$contentActions": [
        {
          "action": {
            "$id": "c276ca81-8a87-46ea-8fba-ee9f9c0f6f12",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "be6bc83e-9c06-4c9f-bdb5-f985e06f4167",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "be6bc83e-9c06-4c9f-bdb5-f985e06f4167",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "e0dad204-f709-4976-959f-8983bbacf5b1",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "d4b7a88b-050d-49d3-9094-95e78b047e48",
              "type": "text/plain",
              "content": "{{ Eu, realmente, não posso conversar com você. 🤐 | \nOlha, a gente não pode conversar até que você complete 18 anos de idade.\n\nTe espero em breve! ☺️\n}}",
              "metadata": { "#message.spinText": "true" }
            },
            "$cardContent": {
              "document": {
                "id": "d4b7a88b-050d-49d3-9094-95e78b047e48",
                "type": "text/plain",
                "content": "{{ Eu, realmente, não posso conversar com você. 🤐 | \nOlha, a gente não pode conversar até que você complete 18 anos de idade.\n\nTe espero em breve! ☺️\n}}"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "73f85a24-74b2-4260-90e7-6f3e917f3242",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-632ea2ec-3fa2-4f9b-87ae-b35545474bd8",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "5c4dc23b-2c85-4cf3-959c-232ea9cdfbec",
      "root": false,
      "$title": "[MSG] - Lower Age Insist",
      "$position": { "top": "2245.21px", "left": "2295.93px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "7f7d9b8c-f397-4395-8c9c-f57aebe1fb31": {
      "$contentActions": [
        {
          "action": {
            "$id": "f050fb78-4d51-4ce4-bc33-d97c49936302",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "ae165815-e226-450a-a1af-0580aeb1cd57",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": "3000" },
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "ae165815-e226-450a-a1af-0580aeb1cd57",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": "3000" }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "32815a89-1810-423e-8f5d-2dc47361515a",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "f8be2251-eb4f-4f2b-9072-7c0aac915835",
              "type": "text/plain",
              "content": "{{showMessage}}",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "f8be2251-eb4f-4f2b-9072-7c0aac915835",
                "type": "text/plain",
                "content": "{{showMessage}}"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "307e410a-919a-479c-8872-c96c3a018925",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "903bb66c-be46-4331-9230-407adcd09d18",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "903bb66c-be46-4331-9230-407adcd09d18",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "cc087eda-1429-4ce3-9e5e-f6837eee8db8",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "application/json",
              "rawContent": "{{menuOptionMessagePromotion@options}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "a1f1b896-3f5a-4a35-adfc-5c9abfbb0528",
                "type": "text/plain",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "b09c8615-fddc-4b3e-a893-bcba45f332e8",
          "typeOfStateId": "state",
          "$connId": "con_283",
          "$id": "83c834e4-3849-4eca-9fcc-0b9d60934836",
          "conditions": [
            {
              "source": "input",
              "comparison": "equals",
              "values": ["Bora!", "Bora"],
              "variable": "isQuizAnswered"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "8890d892-438a-4502-af30-f9d5f0b8d1d6",
          "typeOfStateId": "state",
          "$connId": "con_288",
          "$id": "01b56dce-aecc-4301-a3c0-396045d32635",
          "conditions": [
            {
              "source": "input",
              "comparison": "equals",
              "values": ["Agora, não.", "não", "nao"]
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "7539fc20-dae5-4a64-84cc-4c85df304a21",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[VAR] - Set Show Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(menuOptionMessagePromotion) {\n    menuOptionMessagePromotion = JSON.parse(menuOptionMessagePromotion);\n    return menuOptionMessagePromotion.message;\n}",
            "inputVariables": ["menuOptionMessagePromotion"],
            "outputVariable": "showMessage",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "67c599dc-febc-41ed-985e-39243658b26d",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set Ignore Quiz to Answer",
          "$invalid": false,
          "settings": { "variable": "ignoreQuizToAnswer", "value": "true" },
          "conditions": []
        },
        {
          "$id": "f3c22575-b622-4366-bc98-bd3998f38a6b",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] - Clear Show Message",
          "$invalid": false,
          "settings": { "value": "", "variable": "showMessage" },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$tags": [
        {
          "id": "blip-tag-0c7afb5b-62bc-4b76-8702-2adcbb7c225e",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-20126804-7742-460a-bf64-e3adf444c82d",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-2e08e3f8-bdbe-4b91-b618-7de955f24d5e",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-c761f006-0475-42b3-b898-4721fcb77b9a",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "id": "7f7d9b8c-f397-4395-8c9c-f57aebe1fb31",
      "root": false,
      "$title": "GERAL - Redirect Quiz Copa",
      "$position": { "top": "282.294px", "left": "2016.06px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false,
      "invalidOutputs": true
    },
    "b09c8615-fddc-4b3e-a893-bcba45f332e8": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "7afdac79-7f5f-42ac-ab91-61264f89828a",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "typeOfStateId": "state",
          "$connId": "con_293",
          "$id": "b1d30f1b-31d6-4c34-940d-ff326bda67f3",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false,
          "stateId": "e0bdea80-480a-4e97-9986-30bd09b07f2a"
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "f3f59779-9ccd-4268-bd50-965cc757f55e",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set Question Number",
          "$invalid": false,
          "settings": {
            "variable": "questionNumber",
            "value": "0",
            "expiration": 0
          },
          "conditions": []
        },
        {
          "$id": "6f68b58b-55ec-4298-96ed-ba30e4675b4b",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set quizAnswers",
          "$invalid": false,
          "settings": {
            "variable": "quizAnswers",
            "value": "{\"answers\":[]}"
          },
          "conditions": []
        },
        {
          "$id": "ebfa9697-f15b-4a61-a91e-4888c0ba58f2",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set Quiz Score",
          "$invalid": false,
          "settings": { "variable": "quizScore", "value": "0" },
          "conditions": []
        },
        {
          "$id": "4c0c1869-b391-4c8d-90ce-d7f898088001",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set Time start",
          "$invalid": false,
          "settings": {
            "variable": "quizTimeStarted",
            "value": "{{calendar.time}}"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-47ed0e10-03e2-48b3-9506-d054251723ec",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        }
      ],
      "id": "b09c8615-fddc-4b3e-a893-bcba45f332e8",
      "root": false,
      "$title": "[PCR] QUIZ - Initialize quiz",
      "$position": { "top": "302px", "left": "2612.5px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false,
      "invalidOutputs": true
    },
    "56214f2c-76e6-4c66-9aea-2541f682d833": {
      "$contentActions": [
        {
          "action": {
            "$id": "19ec57b9-78b7-4c30-8844-e67b6ce02ec0",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "fe7e9942-b335-49e4-abc6-932fe482111c",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "fe7e9942-b335-49e4-abc6-932fe482111c",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "7cdbf13d-d4d0-4c8a-b8c5-a8d136119132",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "b7ba8a96-8836-4d30-9f7c-27748ebe1ca4",
              "type": "text/plain",
              "content": "Já estamos em ritmo de *Copa do Mundo!* ⚽\n\nPor isso, preparei um *bate-bola* divertido para testar seus conhecimentos sobre as *edições passadas* desse grande evento esportivo. ✨\n\nSe você acertar de 9 a 10 questões, ganha um *brinde*! 😉",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "b7ba8a96-8836-4d30-9f7c-27748ebe1ca4",
                "type": "text/plain",
                "content": "Já estamos em ritmo de *Copa do Mundo!* ⚽\n\nPor isso, preparei um *bate-bola* divertido para testar seus conhecimentos sobre as *edições passadas* desse grande evento esportivo. ✨\n\nSe você acertar de 9 a 10 questões, ganha um *brinde*! 😉"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "7a894122-9b8d-4487-9012-f59c6c786edd",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "c2a0fbe8-5d88-4630-9dbd-529c1dbc0b77",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "c2a0fbe8-5d88-4630-9dbd-529c1dbc0b77",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "6895a5de-0b46-4021-9474-52567a3febf2",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "application/json",
              "rawContent": "{\n    \"recipient_type\": \"individual\",\n    \"type\": \"interactive\",\n    \"interactive\": {\n        \"type\": \"button\",\n        \"body\": {\n            \"text\": \"Vamos lá? 😃\"\n        },\n        \"action\": {\n            \"buttons\": [\n                {\n                    \"type\": \"reply\",\n                    \"reply\": {\n                        \"id\": \"id_vamos\",\n                        \"title\": \"Vamos!\"\n                    }\n                },\n                {\n                    \"type\": \"reply\",\n                    \"reply\": {\n                        \"id\": \"id_nao\",\n                        \"title\": \"Agora não.\"\n                    }\n                }\n            ]\n        }\n    }\n}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "381b81ac-d403-4883-a58b-7d472d3a5d26",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "b09c8615-fddc-4b3e-a893-bcba45f332e8",
          "typeOfStateId": "state",
          "$connId": "con_298",
          "$id": "996b3d2d-04c9-4e15-9819-99c40d4224a9",
          "conditions": [
            {
              "source": "input",
              "comparison": "equals",
              "values": ["Vamos!", "Vamos", "Sim", "S", "Sim!"]
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "ac3a8cc0-c252-4cc5-9733-bfb65a026023",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK]  Quiz copa - entrada - B10",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Quiz copa - entrada - B10",
            "action": "{{input.content}}"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-9c6b8397-0fd6-4ad8-8c6d-e20289d78305",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-a81a9a62-e2bf-49d7-83f1-a90293efe888",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-f0d5e8db-c9ff-4a9b-938f-2ed4d3509711",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "56214f2c-76e6-4c66-9aea-2541f682d833",
      "root": false,
      "$title": "[MSG] QUIZ - Start Quiz",
      "$position": { "top": "985.529px", "left": "2180.82px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "e0bdea80-480a-4e97-9986-30bd09b07f2a": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "8a295040-34cc-4d7e-a3a2-8b4ff908ae8b",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "bcb7b8f3-fe17-47e6-a48c-afd22a069af0",
          "typeOfStateId": "state",
          "$connId": "con_303",
          "$id": "468bcaa2-d9c5-435b-aa6b-c0b9df8d8d4e",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "2ac79aef-d411-45ad-911a-9b3e37bf4ed0",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_createMenuFunction}}\n\nfunction run(quizQuestions, questionNumber) {\n    return getMenu(quizQuestions, questionNumber);\n}\n\nfunction getMenu(quizQuestions, questionNumber) {\n    let userChannel = 'whatsapp';\n    let channelTextTags = {\"open\": \"*\", \"close\": \"*\"};\n    quizQuestions = JSON.parse(quizQuestions);\n    questionNumber = parseInt(questionNumber);\n    let question = quizQuestions.questions[questionNumber]\n    let options = question.options;\n\tconst text = `${questionNumber+1}. ${question.text}`;\n    \n\n    const menuFields = {\n        text,\n        options\n    };\n    let props = {\n        userChannel,\n        channelTextTags,\n        menuFields\n    };\n    let config = {\n        hasDefaultQuickReply: true,\n        hasWppQuickReply: true,\n        isBlipImmediateMenu: true\n    };\n    let menu = createMenu(props, config);\n    return menu;\n}",
            "inputVariables": ["resource.quizQuestionsWC", "questionNumber"],
            "outputVariable": "menu"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-50e956fc-6aae-429c-963d-549cb6d2e9ab",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "e0bdea80-480a-4e97-9986-30bd09b07f2a",
      "root": false,
      "$title": "[PCR] Quiz - Generate Question",
      "$position": { "top": "436px", "left": "2857.5px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "8e347583-340a-4bee-a452-59fcf6de1921": {
      "$contentActions": [
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "5848b004-7ad1-4711-9e75-0f871ac1b89e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "typeOfStateId": "state",
          "$connId": "con_308",
          "$id": "46e05bf8-defa-462a-9390-80a06c958903",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] },
            {
              "source": "context",
              "comparison": "lessThan",
              "variable": "questionNumber",
              "values": ["10"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "quizHasTime"
            }
          ],
          "$invalid": false,
          "stateId": "e0bdea80-480a-4e97-9986-30bd09b07f2a"
        },
        {
          "stateId": "48e9ff0e-6242-4ef9-9a40-294ec1af1992",
          "typeOfStateId": "state",
          "$connId": "con_313",
          "$id": "24c11dc6-5a99-4018-b884-aff2d339a9c3",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["false"],
              "variable": "quizHasTime"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "41ab728b-3ef4-45a5-9ced-adc764f638da",
          "typeOfStateId": "state",
          "$connId": "con_318",
          "$id": "2df596fa-15f0-42d9-bb5a-57989d3a84b6",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["10"],
              "variable": "questionNumber"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "ec5e2be5-3ba6-4b75-80fa-67a251838792",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Save quiz answer",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(quizAnswers, input) {\n    quizAnswers = JSON.parse(quizAnswers);\n    quizAnswers.answers.push(input);\n    return quizAnswers; \n}",
            "inputVariables": ["quizAnswers", "input.content"],
            "outputVariable": "quizAnswers"
          },
          "conditions": []
        },
        {
          "$id": "a3227ecc-aa9f-4ed8-a62a-9c4519a9e36f",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Go to next question",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(questionNumber) {\n    questionNumber = parseInt(questionNumber);\n    return questionNumber+1;\n}",
            "inputVariables": ["questionNumber"],
            "outputVariable": "questionNumber"
          },
          "conditions": []
        },
        {
          "$id": "c6157680-e559-4a4b-bc93-38bff667a36e",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Calculate Time",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(currentTime, startedTime) {\n    const limitMinute = 5;\n\n    const startedTimeHour = parseInt(startedTime.split(':')[0]);\n    const startedTime = parseInt(startedTime.split(':')[1]);\n    const currentTimeHour = parseInt(currentTime.split(':')[0]);\n    const currentTime = parseInt(currentTime.split(':')[1]);\n\n    if (startedTimeHour == currentTimeHour || (startedTimeHour < currentTimeHour && currentTime < limitMinute)) {\n        if (startedTimeHour < currentTimeHour) {\n            return (currentTime + 60) - startedTime <= limitMinute;\n        } else {\n            return currentTime - startedTime <= limitMinute;\n        }\n    }\n\n    return false;\n}",
            "inputVariables": ["calendar.time", "quizTimeStarted"],
            "outputVariable": "quizHasTime"
          },
          "conditions": []
        },
        {
          "$id": "08f51350-add6-4393-8cb7-d651c3061943",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Quiz copa - pergunta  - B",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Quiz copa - pergunta {{questionNumber}} - B1{{questionNumber}}",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "questionNumber",
              "values": ["10"]
            }
          ]
        },
        {
          "$id": "f393c8a7-8531-4117-a676-e5ba67b0b43e",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Quiz copa - pergunta {{questionNumber}} - C20",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Quiz copa - pergunta {{questionNumber}} - C20",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "questionNumber",
              "values": ["10"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "48e9ff0e-6242-4ef9-9a40-294ec1af1992",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-4537dda0-9655-45e1-b8ca-62f43aab0922",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-e5bf7562-8444-42be-a48f-825aea077d57",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-f139f522-12a2-44b8-a250-9fe3b76f3dc6",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "8e347583-340a-4bee-a452-59fcf6de1921",
      "root": false,
      "$title": "[IN] QUIZ - Save Answer",
      "$position": { "top": "592px", "left": "2604.06px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false,
      "invalidOutputs": true
    },
    "48e9ff0e-6242-4ef9-9a40-294ec1af1992": {
      "$contentActions": [
        {
          "action": {
            "$id": "f2bad0ce-1389-4c1f-ab6f-45b7acf8c10f",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "7c6e54ca-da6c-40b9-b37a-d92eb3409fd1",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "7c6e54ca-da6c-40b9-b37a-d92eb3409fd1",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "d1b98b5f-3bed-4191-9d79-bac292fa8548",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "c815c1a6-b58d-4a14-a4c0-d10fd3202c42",
              "type": "text/plain",
              "content": "Poxa... \n\nO seu tempo acabou 😕⏱️",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "c815c1a6-b58d-4a14-a4c0-d10fd3202c42",
                "type": "text/plain",
                "content": "Poxa... \n\nO seu tempo acabou 😕⏱️"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "99f4db4c-bfce-43eb-91b3-bb0e1c785985",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "533497fa-abfc-48bc-a082-cb5b906923f4",
          "typeOfStateId": "state",
          "$connId": "con_323",
          "$id": "89c06a2a-a942-4be5-9a9b-f2d6897e9c87",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "2cde332e-e5b0-4d2c-a139-2f6c683538c3",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "Set isQuizAnswered",
          "$invalid": false,
          "settings": { "extras": { "isQuizAnswered": "true" } },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-29df8a46-c890-42f6-8458-7689a1617473",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-608dab63-2a49-4e71-b280-7419ee544715",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "48e9ff0e-6242-4ef9-9a40-294ec1af1992",
      "root": false,
      "$title": "[MSG] QUIZ - Time Over",
      "$position": { "top": "834.5px", "left": "2606.5px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "41ab728b-3ef4-45a5-9ced-adc764f638da": {
      "$contentActions": [
        {
          "action": {
            "$id": "6a15e28f-5226-41bc-9842-53e51577a23b",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "c448ab69-4566-46ae-b1e6-bb5e11fbb837",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "c448ab69-4566-46ae-b1e6-bb5e11fbb837",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "5751a982-af54-4753-9035-c56f98aa901e",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "1c60fad9-4af1-46c0-8407-2402df185262",
              "type": "text/plain",
              "content": "Pronto! 😃\n\nVocê respondeu *10 perguntas* sobre a *Copa do Mundo*. ⚽",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "1c60fad9-4af1-46c0-8407-2402df185262",
                "type": "text/plain",
                "content": "Pronto! 😃\n\nVocê respondeu *10 perguntas* sobre a *Copa do Mundo*. ⚽"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "e37633ef-9456-486e-967f-69ea2ba62ddb",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "5bf62fa4-3c89-43d3-887b-9e1f4ad91717",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "5bf62fa4-3c89-43d3-887b-9e1f4ad91717",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "58d4207e-bffc-4889-9ca8-92a06ed2c187",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "application/json",
              "rawContent": "{\n    \"recipient_type\": \"individual\",\n    \"type\": \"interactive\",\n    \"interactive\": {\n        \"type\": \"button\",\n        \"body\": {\n            \"text\": \"Vamos ver seu *resultado*? \"\n        },\n        \"action\": {\n            \"buttons\": [\n                {\n                    \"type\": \"reply\",\n                    \"reply\": {\n                        \"id\": \"id_bora\",\n                        \"title\": \"Bora!\"\n                    }\n                }\n            ]\n        }\n    }\n}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "11b61019-3159-42ad-b7e4-9f4ead9ec8da",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "typeOfStateId": "state",
          "$connId": "con_328",
          "$id": "beb6970d-0a78-4040-958a-956dec45d240",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false,
          "stateId": "442ebfcc-ee06-42de-98bb-310edcfe5bd4"
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "9d10a504-316a-41e9-a0d3-05737b64d5ec",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Quiz copa - resultado - C21",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Quiz copa - resultado - C21",
            "action": "Bora"
          },
          "conditions": []
        },
        {
          "$id": "6ef83cb7-9bac-4404-9f37-ab12cdfbb02b",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "Set isQuizAnswered",
          "$invalid": false,
          "settings": {
            "extras": { "isQuizAnswered": "true", "isQuizAnsweredV2": "true" }
          },
          "conditions": []
        },
        {
          "$id": "f74fc163-72db-4a27-96e5-d0d4b8725939",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "Definir contato",
          "$invalid": false,
          "settings": { "extras": {} },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-0126c280-bcd0-4706-a67c-35a8229dfd95",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-2e702fec-6bb0-4662-83ca-4c6eb9e4ee6d",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-68cf18e1-560e-4972-a604-573edcf8c922",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-5dc754b0-2f56-4974-8289-32f50ed789de",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "41ab728b-3ef4-45a5-9ced-adc764f638da",
      "root": false,
      "$title": "[MSG] QUIZ - Go to Results",
      "$position": { "top": "606px", "left": "2860.5px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false,
      "invalidOutputs": true
    },
    "442ebfcc-ee06-42de-98bb-310edcfe5bd4": {
      "$contentActions": [
        {
          "action": {
            "$id": "2f363bd4-2f2d-4792-8f83-14efd7b997c9",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "52ec0e9f-b151-4baa-8ab0-f3af48564acb",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "52ec0e9f-b151-4baa-8ab0-f3af48564acb",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "603e353d-6438-4339-a518-856f112793c8",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "3a89c6f8-2557-4a2a-93e3-524531bde6c1",
              "type": "text/plain",
              "content": "{{messageContent}}",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "3a89c6f8-2557-4a2a-93e3-524531bde6c1",
                "type": "text/plain",
                "content": "{{messageContent}}"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "344663a7-b4de-41ed-bcf6-a973e1c4cf90",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "0019b668-d81a-489a-9b8a-b1451ac90571",
          "typeOfStateId": "state",
          "$connId": "con_333",
          "$id": "c9085308-0db5-41f6-83e5-bed1988b1865",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "139621f1-1545-4594-b050-1b6127b1b691",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Calculate Score",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "\nfunction run(quizQuestions, userAnswers) {\n    quizQuestions = JSON.parse(quizQuestions)\n    userAnswers = JSON.parse(userAnswers)\n    let score = 0;\n    let rightAnswers = quizQuestions.questions.map(x => x.right);\n    userAnswers = userAnswers.answers;\n\n    for(let i=0; i< rightAnswers.length; i++){\n        if(rightAnswers[i].toLowerCase() ==  userAnswers[i].toLowerCase()){\n            score+=1;\n        }\n    }\n\n    return score; //Return value will be saved as \"Return value variable\" field name\n}",
            "inputVariables": ["resource.quizQuestionsWC", "quizAnswers"],
            "outputVariable": "quizScore",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "788f58e2-4201-44e4-8dbe-21ff052d6f29",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Get message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "\nfunction run(quizScore) {\n    let message = \"\";\n    if(quizScore<6){\n        message = `Ih... você acertou *${quizScore}* respostas e ficou no *banco de reserva*! 😅\\n\\nFique ligado nos jogos da *Copa do Mundo 2022* para acertar tudo da próxima vez, hein!`\n    }else if(quizScore<9){\n        message = `Opa!\\nVocê acertou *${quizScore}* respostas e mostrou que é *bom de bola*! 😎\\nAposto que não vai perder nenhum jogo da *Copa do Mundo 2022*!`\n\n    }else{\n        message = `Uau!\\nVocê acertou *${quizScore}* respostas, é um verdadeiro *craque* quando o assunto é *futebol*! 👑\\nAcho que você fica ligado em *todos os jogos* da Copa!`\n    }\n    return message; \n}",
            "inputVariables": ["quizScore"],
            "outputVariable": "messageContent",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-f8e5ca8d-c102-476e-b219-236f7aaf6f63",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-fbb5afa2-650f-41a8-8bd9-28915422a8fd",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "442ebfcc-ee06-42de-98bb-310edcfe5bd4",
      "root": false,
      "$title": "QUIZ - Calculate Score",
      "$position": { "top": "606px", "left": "3083px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "0fc9ac1e-bc4d-429c-b548-2a254ab5bbbd": {
      "$contentActions": [
        {
          "action": {
            "$id": "0a7fb552-9d56-4a2b-ad54-1c7af66b0077",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "6a56e92e-2645-4b13-bf99-3d944e443adf",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "6a56e92e-2645-4b13-bf99-3d944e443adf",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "d23de2bb-28e7-41d8-8371-7c47637d062a",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "01273960-87f5-4f41-ab8e-57db11af4fd4",
              "type": "text/plain",
              "content": "Eu adorei relembrar momentos da Copa do Mundo! \n\nObrigada por participar comigo. 🥰",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "01273960-87f5-4f41-ab8e-57db11af4fd4",
                "type": "text/plain",
                "content": "Eu adorei relembrar momentos da Copa do Mundo! \n\nObrigada por participar comigo. 🥰"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "8d0e01cd-701a-419c-b618-3036ef648f98",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "10b39c90-25bf-45ac-886c-8e262c142f62",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "10b39c90-25bf-45ac-886c-8e262c142f62",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "412f197d-ea0e-4767-b84e-b5595f9694dd",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "db7939c2-2a5d-4a7e-9941-946ccc802e60",
              "type": "text/plain",
              "content": "*Mande esse quiz* para os seus amigos e veja quem acerta mais! 😜\n\n➡️ https://cokeurl.com/QuizCopaDoMundo",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "db7939c2-2a5d-4a7e-9941-946ccc802e60",
                "type": "text/plain",
                "content": "*Mande esse quiz* para os seus amigos e veja quem acerta mais! 😜\n\n➡️ https://cokeurl.com/QuizCopaDoMundo"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "1fb93b91-37d8-44dc-a504-d1fdbeb5f47c",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "533497fa-abfc-48bc-a082-cb5b906923f4",
          "typeOfStateId": "state",
          "$connId": "con_338",
          "$id": "2ae98c5f-ddd8-4ac1-8a9a-2fb5d23ebbbe",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "73fb2690-7f61-45f0-a101-2e134624c0de",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "Set Score",
          "$invalid": false,
          "settings": { "extras": { "promo_wc_score": "{{quizScore}}" } },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-e1c29c1f-96fc-4f88-ae9c-22d4cafee433",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-14988446-7f29-4ecd-932b-fc5a641c59ce",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "0fc9ac1e-bc4d-429c-b548-2a254ab5bbbd",
      "root": false,
      "$title": "[MSG] QUIZ - Finish",
      "$position": { "top": "748.5px", "left": "3304px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "0019b668-d81a-489a-9b8a-b1451ac90571": {
      "$contentActions": [
        {
          "action": {
            "$id": "95e93f25-c11f-42b0-ade3-0d5772932fce",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "3598325d-27f6-47c6-ad83-2c35097debc5",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "3598325d-27f6-47c6-ad83-2c35097debc5",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "aefa34df-d8cc-43ee-a0f0-3c17afd72fe7",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "application/json",
              "rawContent": "{\n    \"recipient_type\": \"individual\",\n    \"type\": \"interactive\",\n    \"interactive\": {\n        \"type\": \"button\",\n        \"body\": {\n            \"text\": \"E aí, o que você achou do meu quiz de Copa do Mundo? 😍\"\n        },\n        \"action\": {\n            \"buttons\": [\n                {\n                    \"type\": \"reply\",\n                    \"reply\": {\n                        \"id\": \"id_adorei\",\n                        \"title\": \"Adorei!\"\n                    }\n                },\n                {\n                    \"type\": \"reply\",\n                    \"reply\": {\n                        \"id\": \"id_nao\",\n                        \"title\": \"Não curti.\"\n                    }\n                }\n            ]\n        }\n    }\n}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "f533322c-313b-40d7-8fe1-444d0f490ea3",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "typeOfStateId": "state",
          "$connId": "con_343",
          "$id": "818f4ec0-622e-4a00-8f79-f5b798bd022c",
          "conditions": [
            {
              "source": "context",
              "comparison": "greaterThanOrEquals",
              "values": ["0"],
              "variable": "quizScore"
            }
          ],
          "$invalid": false,
          "stateId": "79e42bab-e388-4c51-b7bc-6991f91e5dc3"
        },
        {
          "stateId": "0fc9ac1e-bc4d-429c-b548-2a254ab5bbbd",
          "typeOfStateId": "state",
          "$connId": "con_348",
          "$id": "c5dd5cbc-85dc-430c-8630-3eaeb917ec6f",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "23fc3815-ea5c-40b4-8bd3-60bf242a1b7a",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "[TRK] Quiz copa - o que achou - C22",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Quiz copa - o que achou - C22",
            "action": "{{input.content}}"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-17e6a46d-0bb1-4211-bed0-77c8136ccb6e",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-2f5c63fd-2bdf-4697-9dd7-da30d3b2ecf1",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-b7c646d1-2d12-4252-9d90-050dcc5fb0fc",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "0019b668-d81a-489a-9b8a-b1451ac90571",
      "root": false,
      "$title": "[MSG] QUIZ - Ask if liked the game",
      "$position": { "top": "577px", "left": "3302.5px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false,
      "invalidOutputs": true
    },
    "79e42bab-e388-4c51-b7bc-6991f91e5dc3": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "cbbfaaf8-3ebe-4253-b65b-7abd405749c7",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "fb194ccc-6fcd-4d16-840f-7631db8c12a2",
          "typeOfStateId": "state",
          "$connId": "con_353",
          "$id": "bd1eac20-6e01-49bf-a49a-1ddc0cc11bb7",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "6b7ab9d8-8c08-48d2-958e-e34853505f4c",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Get Cupom",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(cupomList) {\n    cupomList = JSON.parse(cupomList);\n    let randomCupomIndex = Math.floor(Math.random()* cupomList.cupons.length);\n    let messageContent = {\n        \"cupom\": cupomList.cupons[randomCupomIndex],\n        \"cupomMessage\": \"Vou te mandar um *ingresso do Cinemark* pra você curtir um filme, ok? 😃\",\n        \"cupomRule\": \"Orientações de Troca:\\n1º Acesse o aplicativo (ou site da Cinemark)\\n2º Escolha seu filme/ cinema.\\n3º Escolha o dia, horário e sala.\\n4º Selecione os lugares.\\n5º Na página de pagamento, escolha a opção “Super Saver” e selecione a quantidade de “Super Saver” (ingressos) a serem utilizados com os códigos.\\n\\nOs códigos são unitários e não devem ser repetidos.\\nPrazo de Validade: 31/12/2022\",\n        randomCupomIndex\n    }\n    \n    if(messageContent.cupom.startsWith(\"COCA10\")){\n        messageContent.cupomMessage = \"Vou mandar um *cupom do iFood* para você tomar uma *Coca-Cola* bem geladinha! 🥤\";\n        messageContent.cupomRule = \"_Cupom de R$ 10 de desconto para pedidos que contenham Coca-Cola Sem Açúcar, em restaurantes, no app iFood. Cupom válido até 30/10/2022 ou até atingir a quantidade de cupons disponíveis. Limitado a 1 uso por CPF. Promoção não cumulativa com outras promoções ou cupons de desconto. A Coca-Cola e o iFood se reservam o direito de alterar esta promoção sem aviso prévio._\";\n\n    }\n    return messageContent; \n}",
            "inputVariables": ["resource.cupomList"],
            "outputVariable": "messageContent",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "183904d9-9e8c-4a5a-ae72-3851d9e59090",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Update Cupom List",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(messageContent, cupomList) {\n    messageContent = JSON.parse(messageContent);\n    cupomList = JSON.parse(cupomList);\n    let cupomIndex = parseInt(messageContent.randomCupomIndex);\n    cupomList.cupons.splice(cupomIndex,1);\n    return cupomList; //Return value will be saved as \"Return value variable\" field name\n}",
            "inputVariables": ["messageContent", "resource.cupomList"],
            "outputVariable": "cupomList",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "27aa4e27-cf25-43c3-bc2a-454202f7ea4f",
          "$typeOfContent": "",
          "type": "ProcessCommand",
          "$title": "[CMD] Update cupom list",
          "$invalid": false,
          "settings": {
            "to": "postmaster@msging.net",
            "method": "set",
            "resource": "{{cupomList}}",
            "type": "text/plain",
            "uri": "/resources/cupomList",
            "variable": "cupomListUpdate"
          },
          "conditions": []
        },
        {
          "$id": "299545f9-658e-4159-bfc4-dafee07de732",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Get cupom rules",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(messageContent) {\n    messageContent = JSON.parse(messageContent);\n    return messageContent.cupomRule; //Return value will be saved as \"Return value variable\" field name\n}",
            "inputVariables": ["messageContent"],
            "outputVariable": "messageContentRules",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-64d7384c-5644-4849-8c36-887c028baedb",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-9c5de727-686a-4854-a395-fb36df8bf0d3",
          "label": "ProcessCommand",
          "background": "#FC91AE",
          "canChangeBackground": false
        }
      ],
      "id": "79e42bab-e388-4c51-b7bc-6991f91e5dc3",
      "root": false,
      "$title": "[PCR] QUIZ - Get Cupom",
      "$position": { "top": "577px", "left": "3557px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "fb194ccc-6fcd-4d16-840f-7631db8c12a2": {
      "$contentActions": [
        {
          "action": {
            "$id": "1fde6fda-c3c7-4107-8435-b7ee08af1566",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "e6b63ffa-b3c1-4bf9-accd-ae7c2fc15171",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "e6b63ffa-b3c1-4bf9-accd-ae7c2fc15171",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "a16e02dd-556e-42fc-b3cf-5a38aa09a127",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "c338acf0-51e4-44c8-81cc-504f8bbe035a",
              "type": "text/plain",
              "content": "Eu adorei relembrar momentos da Copa do Mundo! \n\nObrigada por participar comigo. 🥰",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "c338acf0-51e4-44c8-81cc-504f8bbe035a",
                "type": "text/plain",
                "content": "Eu adorei relembrar momentos da Copa do Mundo! \n\nObrigada por participar comigo. 🥰"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "5ea5260c-b4b8-4bc6-83e6-2101896e6356",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "13c3f6bf-b050-4270-87b9-6a6c98417e27",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "13c3f6bf-b050-4270-87b9-6a6c98417e27",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "161f6fda-8756-49dc-a096-109b14acba55",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "a24f0abe-2701-4f34-b411-e13010af860d",
              "type": "text/plain",
              "content": "{{messageContent@cupomMessage}}",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "a24f0abe-2701-4f34-b411-e13010af860d",
                "type": "text/plain",
                "content": "{{messageContent@cupomMessage}}"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "01f159bc-eac9-4d7d-a069-dfa0927aaa16",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "60d5c8b0-2786-49a5-bd39-e426653c1ae5",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "60d5c8b0-2786-49a5-bd39-e426653c1ae5",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "65dc996d-3451-4e34-9626-1c2697a37d84",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "3a628009-2b1e-4638-8a05-647306ba5cdf",
              "type": "text/plain",
              "content": "{{messageContent@cupom}}",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "3a628009-2b1e-4638-8a05-647306ba5cdf",
                "type": "text/plain",
                "content": "{{messageContent@cupom}}"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "7b7a8f96-66e8-4233-8369-6412420d9d9f",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "e258d01e-3745-4a13-a6a9-2884f9c774f5",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "e258d01e-3745-4a13-a6a9-2884f9c774f5",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "d76ce1dc-dac2-45c0-9e57-f5cd9d771ffd",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "89ab0777-abfa-4e5e-8698-231ac32c3f12",
              "type": "text/plain",
              "content": "{{messageContentRules}}",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "89ab0777-abfa-4e5e-8698-231ac32c3f12",
                "type": "text/plain",
                "content": "{{messageContentRules}}"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "0bbd48f2-c60c-4d10-86c1-a07e806e1562",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "8af1c35a-711a-4998-bb1c-6c052f85c49a",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "8af1c35a-711a-4998-bb1c-6c052f85c49a",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "d656e009-65f7-4c3d-98b7-3a545e82a0f6",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "9c872bfd-6767-49bc-9fa8-b3e805a2ce71",
              "type": "text/plain",
              "content": "*Mande esse quiz* para os seus amigos e veja quem acerta mais! 😜\n\n➡️ https://cokeurl.com/QuizCopaDoMundo",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "9c872bfd-6767-49bc-9fa8-b3e805a2ce71",
                "type": "text/plain",
                "content": "*Mande esse quiz* para os seus amigos e veja quem acerta mais! 😜\n\n➡️ https://cokeurl.com/QuizCopaDoMundo"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "1b9c0830-ed38-4213-bab0-ebee2db84156",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "533497fa-abfc-48bc-a082-cb5b906923f4",
          "typeOfStateId": "state",
          "$connId": "con_358",
          "$id": "f8f8d562-d726-4ddf-a76d-353ceb08fd51",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "27801bba-c003-48ca-bd3a-65da83658637",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "Set cupom and score",
          "$invalid": false,
          "settings": {
            "extras": {
              "promo_wc_cupom": "{{messageContent@cupom}}",
              "promo_wc_score": "{{quizScore}}"
            }
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-eff900a3-60a7-45bf-bd20-4884dbb04842",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-bd4c5a20-65c5-4dd2-b047-d2447c1cfe95",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "fb194ccc-6fcd-4d16-840f-7631db8c12a2",
      "root": false,
      "$title": "[MSG] QUIZ - Show Cupom",
      "$position": { "top": "852.5px", "left": "3541px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "bcb7b8f3-fe17-47e6-a48c-afd22a069af0": {
      "$contentActions": [
        {
          "action": {
            "$id": "40e9d893-e946-4a83-a33b-51337d2a9c12",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "6c3ba0b8-e04d-4db4-aadf-2a8710512b16",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "6c3ba0b8-e04d-4db4-aadf-2a8710512b16",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "caddd4ff-259c-4a07-82c4-b5388a2a326b",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "{{menu@type}}",
              "rawContent": "{{menu@content}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "37107cb5-4f32-40b2-bf41-ee8cfdfb2e56",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "8e347583-340a-4bee-a452-59fcf6de1921",
          "typeOfStateId": "state",
          "$connId": "con_363",
          "$id": "c0e62303-c8e5-4d15-a8b5-36bb777e7eaa",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-18500c9c-68b6-44e4-92d4-d7dfb737a296",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "bcb7b8f3-fe17-47e6-a48c-afd22a069af0",
      "root": false,
      "$title": "[MSG] QUIZ - Show Question",
      "$position": { "top": "435px", "left": "2457.5px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "533497fa-abfc-48bc-a082-cb5b906923f4": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "316fc152-5fea-4a89-b668-187ed42f47c4",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "3f209611-3f6b-46c5-952a-ee94ffc08294",
          "typeOfStateId": "state",
          "$connId": "con_368",
          "$id": "4c297c19-fc67-420a-be78-de558d936e12",
          "conditions": [
            {
              "source": "context",
              "comparison": "notExists",
              "values": [],
              "variable": "contact.extras.bobsAnswered"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "8890d892-438a-4502-af30-f9d5f0b8d1d6",
          "typeOfStateId": "state",
          "$connId": "con_373",
          "$id": "05d4873e-027d-4b9c-9307-ae04316d4075",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [],
      "id": "533497fa-abfc-48bc-a082-cb5b906923f4",
      "root": false,
      "$title": "[PCR] - Return Main Menu",
      "$position": { "top": "630.529px", "left": "1348px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "2b9995a9-ebf0-40ba-8af1-41a51381b359": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "26d97d2d-a590-46fa-8120-6d914357f1b2",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "7a395591-5303-4eaa-88a2-f0e2dae3c698",
          "typeOfStateId": "state",
          "$connId": "con_378",
          "$id": "fd0f2cb0-3a65-463a-9bbf-525219975d5f",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "5a9d86f7-102f-4970-9a8f-4af28029c6ff",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate destiny",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(firstIntent, userChannel, resourceCouponBBB23Str) {\n    const {isActive} = JSON.parse(resourceCouponBBB23str)\n    let destiny = {\n        destinyBot: \"Main\",\n        sendMessage: \"Oi\"\n    }\n    \n    if(firstIntent == \"#testekoraperfilcic\" && (userChannel == \"whatsapp\")){\n        destiny.destinyBot = \"WorkInCoca\";\n        destiny.sendMessage = firstIntent;\n\n    }\n\n    else if(firstIntent == \"#testeCommitment\"){\n        destiny.destinyBot = \"Opinion\"\n        destiny.sendMessage = firstIntent\n    }\n\n    else if(firstIntent == \"#IfoodAudiosMagicos\" || firstIntent == \"#AudiosMagicos\" || firstIntent == \"#CCAudiosMagicos\" || firstIntent == \"#PromoAudiosMagicos\"|| firstIntent == \"#AudiosMagicosKora\"){\n        destiny.destinyBot = \"TempPromo\"\n        destiny.sendMessage = \"#MagicAudios2022\"\n    }\n\n    else if(firstIntent == \"#KoraBBB23\" && isActive){\n        destiny.destinyBot = \"TempPromo\"\n        destiny.sendMessage = \"#KoraBBB23\"\n    }\n    \n    return destiny; \n}",
            "inputVariables": [
              "firstIntent",
              "userChannel",
              "resource.couponBBB23"
            ],
            "outputVariable": "destiny",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "d67ef7ef-e697-4664-8a8e-eaa21ce8a781",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Audios magicos - Entrada via Link - Z11",
          "$invalid": false,
          "settings": {
            "extras": {},
            "action": "{{firstIntent}}",
            "category": "Audios magicos - Entrada via Link - Z11"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-db1c7d94-da05-477d-91fc-23c8541da997",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "2b9995a9-ebf0-40ba-8af1-41a51381b359",
      "root": false,
      "$title": "[PCR] Flow with Intent",
      "$position": { "top": "1911px", "left": "1342.43px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "c201f004-5af8-4637-8a57-f223baec5d63": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "95832206-70ef-459c-adbb-cd8d0032975e",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "8890d892-438a-4502-af30-f9d5f0b8d1d6",
          "typeOfStateId": "state",
          "$connId": "con_383",
          "$id": "8e715594-a9f7-47a1-bd4d-7c9e0aa94649",
          "conditions": [
            {
              "source": "input",
              "comparison": "equals",
              "values": ["#MenuFanta"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "2b9995a9-ebf0-40ba-8af1-41a51381b359",
          "typeOfStateId": "state",
          "$connId": "con_388",
          "$id": "1bb5d706-599f-4af4-8c6c-a99ed69cb95a",
          "conditions": [
            { "source": "input", "comparison": "startsWith", "values": ["#"] }
          ],
          "$invalid": false
        },
        {
          "stateId": "60282a85-cdc6-48be-90c5-8edd8728d3d8",
          "typeOfStateId": "state",
          "$connId": "con_393",
          "$id": "cc9668bd-0310-42a1-8141-867d09dbb4dc",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "3769bbe7-4c94-4119-8571-ba0d613a1272",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] SET FIRSTINTENT",
          "$invalid": false,
          "settings": {
            "variable": "firstIntent",
            "value": "{{input.content}}"
          },
          "conditions": [
            { "source": "input", "comparison": "startsWith", "values": ["#"] }
          ]
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-e294e8ab-0b49-4082-9134-fbf3e6744ff9",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        }
      ],
      "id": "c201f004-5af8-4637-8a57-f223baec5d63",
      "root": false,
      "$title": "[PCR] GENERIC - Check if has flow intention",
      "$position": { "top": "276px", "left": "1177px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "3f209611-3f6b-46c5-952a-ee94ffc08294": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "64789661-f8ad-44ba-af6f-5e451eb3b64c",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "7a395591-5303-4eaa-88a2-f0e2dae3c698",
          "typeOfStateId": "state",
          "$connId": "con_398",
          "$id": "249c2202-12d1-4d02-af28-e1f54ad91ad3",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "de1413be-35ab-4497-abb5-cb1a28fd3c00",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[PCR] Set Destiny",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run() {\n\n    let destiny = {\n        destinyBot: \"HelpKora\",\n        sendMessage: {\n            flow: \"inicio\"\n        }\n    };\n\n    return destiny;\n}",
            "inputVariables": [],
            "outputVariable": "destiny",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [
        {
          "id": "blip-tag-870229eb-37ba-4199-801a-3c2a30e22915",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "3f209611-3f6b-46c5-952a-ee94ffc08294",
      "root": false,
      "$title": "[PCR] BOBS - Set Destiny",
      "$position": { "top": "782px", "left": "1468px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "5d2bca95-54d9-4285-a2ef-dcd21faf7b14": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "c8440d79-fc46-4ff5-b4c9-2325df3dd067",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false,
          "$$hashKey": "object:2122"
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "03ac7245-647a-4f30-bdb6-dc30ea351330",
          "typeOfStateId": "state",
          "$connId": "con_403",
          "$id": "c37d15cc-fd3b-4ee4-a382-a08f4a54fa13",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["#MagicAudiosDateIsOver"],
              "variable": "firstIntent",
              "$$hashKey": "object:2184"
            }
          ],
          "$invalid": false,
          "$$hashKey": "object:2147"
        },
        {
          "stateId": "d09884f5-55ce-4558-876a-98ca7da9ba1e",
          "typeOfStateId": "state",
          "$connId": "con_408",
          "$id": "a8bb10f0-8006-417a-a725-fd66dcf96ab2",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["#MagicAudiosPromoIsOver"],
              "variable": "firstIntent",
              "$$hashKey": "object:2211"
            }
          ],
          "$invalid": false,
          "$$hashKey": "object:2148"
        },
        {
          "typeOfStateId": "state",
          "$id": "910765c6-dcfb-4cb8-b412-6eb3e6e8bd4b",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["true"],
              "variable": "contact.extras.updatedTermsAccepted",
              "$$hashKey": "object:2238"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "contact.extras.newTermsAccepted",
              "values": ["true"],
              "$$hashKey": "object:2239"
            }
          ],
          "$invalid": false,
          "stateId": "0951d05d-72b2-42de-b842-d9c98d091a26",
          "$connId": "con_413",
          "$$hashKey": "object:2149"
        },
        {
          "stateId": "2b9995a9-ebf0-40ba-8af1-41a51381b359",
          "typeOfStateId": "state",
          "$connId": "con_418",
          "$id": "dada97d8-f529-45ef-a6cf-c925d18d72b8",
          "conditions": [
            {
              "source": "input",
              "comparison": "startsWith",
              "values": ["#"],
              "$$hashKey": "object:2285"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "contact.extras.newTermsAccepted",
              "values": ["true"],
              "$$hashKey": "object:2286"
            }
          ],
          "$invalid": false,
          "$$hashKey": "object:2150"
        },
        {
          "stateId": "8890d892-438a-4502-af30-f9d5f0b8d1d6",
          "typeOfStateId": "state",
          "$connId": "con_423",
          "$id": "9c89fb5f-288b-4f9a-b308-c665cc1a6b0d",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "contact.extras.newTermsAccepted",
              "$$hashKey": "object:2328"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "userName",
              "$$hashKey": "object:2329"
            }
          ],
          "$invalid": false,
          "$$hashKey": "object:2151"
        },
        {
          "stateId": "0bd5fbf6-056a-4b77-827b-e28789d82bf9",
          "typeOfStateId": "state",
          "$connId": "con_428",
          "$id": "38b0cd7f-5803-4ce7-85e3-8a2aca6661e2",
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "isAgeBigger18",
              "$$hashKey": "object:2373"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "contact.extras.newTermsAccepted",
              "values": ["true"],
              "$$hashKey": "object:2374"
            }
          ],
          "$invalid": false,
          "$$hashKey": "object:2152"
        },
        {
          "stateId": "327d0b10-399c-4bdd-9681-1080360cae59",
          "typeOfStateId": "state",
          "$connId": "con_433",
          "$id": "7b4111f5-4f85-470f-8bed-7d6874c27869",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": [],
              "$$hashKey": "object:2418"
            }
          ],
          "$invalid": false,
          "$$hashKey": "object:2153"
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "fc686aa6-f80b-4b54-a799-0921d762ca8d",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Increment access flow counter",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(accessFlow) {\n    accessFlow = accessFlow ? parseInt(accessFlow) : 0;\n    return accessFlow+1;\n}",
            "inputVariables": ["contact.extras.accessFlowMain"],
            "outputVariable": "accessFlow",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [],
          "continueOnError": true
        },
        {
          "$id": "ce36f7f1-cf80-4344-b8af-6c92aac02010",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Set access flow",
          "$invalid": false,
          "settings": { "extras": { "accessFlowMain": "{{accessFlow}}" } },
          "conditions": []
        },
        {
          "$id": "3ce6e749-5cfd-412b-9f5d-2631b9f81373",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Set date creation",
          "$invalid": false,
          "settings": {
            "extras": { "contactCreatedDate": "{{calendar.datetime}}" }
          },
          "conditions": [
            {
              "comparison": "notExists",
              "values": [],
              "source": "context",
              "variable": "contact.extras.contactCreatedDate"
            },
            {
              "source": "context",
              "comparison": "notExists",
              "values": [],
              "variable": "contact.extras.newTermsAccepted"
            }
          ]
        },
        {
          "$id": "1fb99dc9-5184-4356-90d4-90b0a89899a8",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Set newTermsAccepted",
          "$invalid": false,
          "settings": { "extras": { "newTermsAccepted": "true" } },
          "conditions": [
            {
              "source": "context",
              "comparison": "notExists",
              "values": [],
              "variable": "contact.extras.newTermsAccepted"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "contact.extras.termsAccepted",
              "values": ["true"]
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.email"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "userBirth"
            }
          ]
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "327d0b10-399c-4bdd-9681-1080360cae59",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-87664931-12d7-44f5-b147-9f37bf7ddf08",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-d82449e3-38e2-4d1d-90ec-f3e7daf29fbb",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        }
      ],
      "id": "5d2bca95-54d9-4285-a2ef-dcd21faf7b14",
      "root": false,
      "$title": "[PCR] CONTACT - Set Contact Information",
      "$position": { "top": "335px", "left": "375.02px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false,
      "invalidOutputs": true
    },
    "451c61a6-8dd7-43ab-ac0c-1c99df62e231": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "c8440d79-fc46-4ff5-b4c9-2325df3dd067",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "typeOfStateId": "state",
          "$connId": "con_438",
          "$id": "39cfa137-5b7c-48e7-808a-c3d786154ab6",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false,
          "stateId": "c201f004-5af8-4637-8a57-f223baec5d63"
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "fc686aa6-f80b-4b54-a799-0921d762ca8d",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Increment access flow counter",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(accessFlow) {\n    accessFlow = accessFlow ? parseInt(accessFlow) : 0;\n    return accessFlow+1;\n}",
            "inputVariables": ["contact.extras.excepctionFlowMain"],
            "outputVariable": "accessFlow",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [],
          "continueOnError": true
        },
        {
          "$id": "ce36f7f1-cf80-4344-b8af-6c92aac02010",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Set excepctionFlowInfo",
          "$invalid": false,
          "settings": { "extras": { "excepctionFlowMain": "{{accessFlow}}" } },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-7c9c50c0-788e-4c94-ac58-d11858231942",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-74c4ed32-3007-4d98-8c86-aaa86ee6e789",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        }
      ],
      "id": "451c61a6-8dd7-43ab-ac0c-1c99df62e231",
      "root": false,
      "$title": "[PCR] CONTACT - Set Contact Information Exception",
      "$position": { "top": "79.7273px", "left": "1010.73px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false,
      "invalidOutputs": true
    },
    "fd5b2772-8897-4159-a7e3-6913e069eeaf": {
      "$contentActions": [
        {
          "action": {
            "$id": "561cfa2f-6595-4cd7-9224-5b064fdec8fc",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "c7aba179-764f-4b06-ba75-1a8e97152355",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "c7aba179-764f-4b06-ba75-1a8e97152355",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "ab67a481-6b48-4ce4-8927-50351ed5bf2a",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "b5aee6f9-1d22-4a3d-b082-51a9a78a235e",
              "type": "text/plain",
              "content": "Eu, Kora, sou um canal de comunicação da Coca-Cola Brasil com seus consumidores.\n\nPor isso, não é adequado fazer envios de dados pessoais - nem seus, nem de terceiros.\n\nQualquer envio não solicitado será descartado.\n\n\nAtenciosamente, Kora.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "b5aee6f9-1d22-4a3d-b082-51a9a78a235e",
                "type": "text/plain",
                "content": "Eu, Kora, sou um canal de comunicação da Coca-Cola Brasil com seus consumidores.\n\nPor isso, não é adequado fazer envios de dados pessoais - nem seus, nem de terceiros.\n\nQualquer envio não solicitado será descartado.\n\n\nAtenciosamente, Kora."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "38a04c31-e265-4b5e-9185-91b527689359",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "onboarding",
          "typeOfStateId": "state",
          "$connId": "con_443",
          "$id": "f904f345-40bf-46b4-ba33-c8e3b4c5ff2f",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "e5960f0a-a270-4e54-b215-745df2064e67",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Set warning date",
          "$invalid": false,
          "settings": {
            "extras": { "spamReceivedWarning": "{{calendar.datetime}}" }
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [],
      "id": "fd5b2772-8897-4159-a7e3-6913e069eeaf",
      "root": false,
      "$title": "SPAM - Warning",
      "$position": { "top": "115px", "left": "121px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "359ceaa5-a98a-43f3-84d5-ef03c86b9743": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "04abfc55-1f8a-4b47-999f-eca783422096",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [],
      "id": "359ceaa5-a98a-43f3-84d5-ef03c86b9743",
      "root": false,
      "$title": "BLOCKED USERS",
      "$position": { "top": "232px", "left": "121px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "ceec8fe9-ef95-4733-9c46-27c3e9d15351": {
      "$contentActions": [
        {
          "action": {
            "$id": "35ea2b41-62bc-428f-b644-b3245ac2e3e3",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "97d12100-5144-42f4-914c-3cce487def62",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": "5000" },
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "97d12100-5144-42f4-914c-3cce487def62",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": "5000" }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "b718b1d5-72af-485c-bd16-e3419238e0c5",
            "$typeOfContent": "media-video",
            "type": "SendMessage",
            "settings": {
              "id": "c3758d61-288b-4c76-ae57-a23bc2309773",
              "type": "application/vnd.lime.media-link+json",
              "content": {
                "type": "video/mp4",
                "uri": "https://the-coca-cola-company.github.io/latam-kora/arquivos_audios_magicos/audiosMagicosIntro.mp4"
              },
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "c3758d61-288b-4c76-ae57-a23bc2309773",
                "type": "application/vnd.lime.media-link+json",
                "content": {
                  "type": "video/mp4",
                  "uri": "https://the-coca-cola-company.github.io/latam-kora/arquivos_audios_magicos/audiosMagicosIntro.mp4"
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "34d98e0f-1313-409f-a3f8-49f30f2b1f9f",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "4b8d9ec4-7a85-498b-a658-b62893869434",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": "3000" },
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "4b8d9ec4-7a85-498b-a658-b62893869434",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": "3000" }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "1a2fbccf-7140-47e7-8d25-f48c3037b3f5",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "{{messageContent@type}}",
              "rawContent": "{{messageContent@content}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "c4a8eb8b-26fd-4b62-a72d-af5b306d452c",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "74f60580-9485-4d60-81b6-ae6f652b9a07",
          "typeOfStateId": "state",
          "$connId": "con_448",
          "$id": "c1da1eeb-22ff-4f80-b21a-327847e2e123",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Participar"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "3748f0ba-b79e-4be1-a1f1-0c9db6ea1549",
          "typeOfStateId": "state",
          "$connId": "con_453",
          "$id": "942801b6-1b5a-4d7f-9a64-3c8d27e439e5",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "a46a68e9-ab06-4163-b1e9-23d0d0c6b6c8",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_createMenuFunction}}\n\nfunction run(userChannel, channelTextTags) {\n    return getMenu(userChannel, channelTextTags);\n}\n\nfunction getMenu(userChannel, channelTextTags) {\n    channelTextTags = JSON.parse(channelTextTags);\n    let options = ['Participar!', 'Agora não.'];\n\tconst text = `Será que você consegue gravar um *áudio* com desejos de Natal *no formato de uma garrafa de Coca-Cola*? 😍\\n\\nParticipando da promoção *Áudios Mágicos*, você pode *ganhar* um dos mil cupons de R$40 no iFood e concorrer ao sorteio final de *R$ 10 mil!* 🤑\\n\\n_*Confira o regulamento._`;\n    \n\n    const menuFields = {\n        text,\n        options\n    };\n    let props = {\n        userChannel,\n        channelTextTags,\n        menuFields\n    };\n    let config = {\n        hasDefaultQuickReply: true,\n        hasWppQuickReply: true,\n        isBlipImmediateMenu: true\n    };\n    let menu = createMenu(props, config);\n    return menu;\n}\n",
            "inputVariables": ["userChannel", "channelTextTags"],
            "outputVariable": "messageContent",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "eae6d654-0bfe-4e05-9884-8fb58241123f",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Define user action",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_inputProcessingFunction}}\n\nfunction run(inputContent) {\n    return getSelectedMenuOption(inputContent, 'text/plain');\n}\n\nfunction getSelectedMenuOption(inputContent, inputType) {\n    let options = [];\n\n    options.push(\n        {\n            regex: /Participar/,\n            value: 'Participar'\n        }\n    );\n    let props = {\n        input: inputContent,\n        inputType,\n        options\n    };\n    let config = {\n        isNumberMenu: false,\n        isReversed: false,\n        shouldRemoveSpecialCharacters: false,\n        shouldRemoveWhiteSpaces: false\n    };\n    let selectedMenuOption = validateInputOptions(props, config);\n    \n    return selectedMenuOption;\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "userAction"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [],
      "id": "ceec8fe9-ef95-4733-9c46-27c3e9d15351",
      "root": false,
      "$title": "[MSG] GENERIC - Message before menu",
      "$position": { "top": "1870px", "left": "1841px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "74f60580-9485-4d60-81b6-ae6f652b9a07": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "fee2414e-cad1-455e-8172-e65a03e5f7b7",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "7a395591-5303-4eaa-88a2-f0e2dae3c698",
          "typeOfStateId": "state",
          "$connId": "con_458",
          "$id": "05ede3cc-129e-4ae2-9784-d47a8ce56f77",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "8b747b3a-fc00-4661-a4e4-61d219439a2a",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Destiny",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "\nfunction run() {\n    return {\n    \"destinyBot\": \"TempPromo\",\n    \"input\": \"Áudios Mágicos ✨\",\n    \"blockStateId\": null,\n    \"sendMessage\": {\n        \"flow\": \"#MagicAudios2022\"\n    }\n}\n}",
            "inputVariables": [],
            "outputVariable": "destiny",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "bbf27f00-35a8-4479-8d40-b4f646305d53",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Audios magicos - antes do menu - Z10",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Audios magicos - antes do menu - Z10",
            "action": "Entrada antes do menu"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "7a395591-5303-4eaa-88a2-f0e2dae3c698",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "background": "#EA4D9C",
          "label": "Tracking",
          "id": "blip-tag-19cff111-5b09-1b10-fac4-3234574858d9",
          "canChangeBackground": false
        }
      ],
      "id": "74f60580-9485-4d60-81b6-ae6f652b9a07",
      "root": false,
      "$title": "[PCR] MAGIC - Generate Destiny TempPromo",
      "$position": { "top": "1727.63px", "left": "2073.54px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "d09884f5-55ce-4558-876a-98ca7da9ba1e": {
      "$contentActions": [
        {
          "action": {
            "$id": "63f3ca46-5a8b-49b9-b635-c94bc1f4565a",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "58d209c6-6a01-455e-98f6-221f909f8e69",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "58d209c6-6a01-455e-98f6-221f909f8e69",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "0829e728-4aaa-4408-bcc3-de7800e7e190",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "227446c2-7cd1-42eb-a6e8-103e5dcf091a",
              "type": "text/plain",
              "content": "Poxa, a promo *Áudios Mágicos* já chegou ao limite de prêmios.\n\nMas fique de olho nas próximas oportunidades para ganhar brindes incríveis! 😍",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "227446c2-7cd1-42eb-a6e8-103e5dcf091a",
                "type": "text/plain",
                "content": "Poxa, a promo *Áudios Mágicos* já chegou ao limite de prêmios.\n\nMas fique de olho nas próximas oportunidades para ganhar brindes incríveis! 😍"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "62818253-6bc2-4fae-8677-58d9e8bb1b3b",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "499335a2-8d7a-4d3c-af57-bf254027e15a",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "499335a2-8d7a-4d3c-af57-bf254027e15a",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "8d5a96c7-1217-435e-b424-9936fece131a",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "{{menu@type}}",
              "rawContent": "{{menu@content}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "b3c942c7-293c-4ea8-b4ea-c1f11c4881cf",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "typeOfStateId": "state",
          "$connId": "con_463",
          "$id": "396c3b77-d146-40c8-9895-f5f701a9376f",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Menu Inicial"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false,
          "stateId": "8890d892-438a-4502-af30-f9d5f0b8d1d6"
        },
        {
          "typeOfStateId": "state",
          "$connId": "con_468",
          "$id": "6d6f014c-a191-4d82-9041-ad905d351beb",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Encerrar"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false,
          "stateId": "a2d2fb8e-56c7-4ab4-83a3-e3021ee70935"
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "cdb79358-d9ea-4326-a801-c76e51b59d3c",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Menu Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_createMenuFunction}}\n\nfunction run(userChannel, channelTextTags) {\n    return getMenu(userChannel, channelTextTags);\n}\n\nfunction getMenu(userChannel, channelTextTags) {\n    channelTextTags = JSON.parse(channelTextTags);\n    let options = ['Menu Inicial', 'Encerrar'];\n\tconst text = `O que você quer fazer? 😊`;\n    \n\n    const menuFields = {\n        text,\n        options\n    };\n    let props = {\n        userChannel,\n        channelTextTags,\n        menuFields\n    };\n    let config = {\n        hasDefaultQuickReply: true,\n        hasWppQuickReply: true,\n        isBlipImmediateMenu: true\n    };\n    let menu = createMenu(props, config);\n    return menu;\n}",
            "inputVariables": ["userChannel", "channelTextTags"],
            "outputVariable": "menu",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "aef5dc13-1c48-4d23-8e41-7eb0df9816b3",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set lastblock",
          "$invalid": false,
          "settings": { "variable": "lastblock", "value": "{{state.id}}" },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "3a034667-fc24-4ca7-a679-22c37a4d06f4",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Set userAction",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_inputProcessingFunction}}\n\nfunction run(inputContent) {\n    return getSelectedMenuOption(inputContent, 'text/plain');\n}\n\nfunction getSelectedMenuOption(inputContent, inputType) {\n    let options = [];\n\n    options.push(\n        {\n            regex: /Menu Inicial/,\n            value: 'Menu Inicial'\n        },\n        {\n            regex: /Encerrar/,\n            value: 'Encerrar'\n        }\n    );\n    let props = {\n        input: inputContent,\n        inputType,\n        options\n    };\n    let config = {\n        isNumberMenu: true,\n        isReversed: false,\n        shouldRemoveSpecialCharacters: false,\n        shouldRemoveWhiteSpaces: false\n    };\n    let selectedMenuOption = validateInputOptions(props, config);\n    \n    return selectedMenuOption;\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "userAction"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [],
      "id": "d09884f5-55ce-4558-876a-98ca7da9ba1e",
      "root": false,
      "$title": "[MSG] MAGIC - Promo is over - Limit users",
      "$position": { "top": "173.909px", "left": "3790.9px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false,
      "invalidOutputs": true
    },
    "a2d2fb8e-56c7-4ab4-83a3-e3021ee70935": {
      "$contentActions": [
        {
          "action": {
            "$id": "b29f565a-c6ef-477c-9891-07951e9bac44",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "aed6b8f8-90d6-4ce1-8f90-5799e5921d43",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "aed6b8f8-90d6-4ce1-8f90-5799e5921d43",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "8a0fbabc-892d-4e0d-9579-7308843d13d7",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "2fda630f-d8f6-4b4b-87d1-b322433c7aac",
              "type": "text/plain",
              "content": "Tá bom.\n\nSe precisar de alguma coisa é só chamar! 🥰",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "2fda630f-d8f6-4b4b-87d1-b322433c7aac",
                "type": "text/plain",
                "content": "Tá bom.\n\nSe precisar de alguma coisa é só chamar! 🥰"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "7fda3412-066c-40cd-9ef6-3a09296effb0",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [],
      "id": "a2d2fb8e-56c7-4ab4-83a3-e3021ee70935",
      "root": false,
      "$title": "[MSG] GENERIC - End Conversation",
      "$position": { "top": "380.889px", "left": "3775.11px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "0951d05d-72b2-42de-b842-d9c98d091a26": {
      "$contentActions": [
        {
          "action": {
            "$id": "1a291e27-d11e-411e-b91b-4ec934f1d175",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "a97290a8-3f0d-4b86-9ab2-d5338c040d46",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "a97290a8-3f0d-4b86-9ab2-d5338c040d46",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "55e9f73f-3af8-47e3-bfbf-becf28bed04c",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "{{menu@type}}",
              "rawContent": "{{menu@content}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "aaab8743-d2ad-4ddd-b1e8-f29c24f3f19f",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "d41d5c63-39d4-4a1c-83e5-0fb97f3f84c8",
          "typeOfStateId": "state",
          "$connId": "con_473",
          "$id": "60c88303-cb9f-4df4-871f-6dc0b098ce5b",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Sim"],
              "variable": "userAction@value"
            },
            {
              "source": "context",
              "comparison": "contains",
              "variable": "firstIntent",
              "values": ["flow"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "8890d892-438a-4502-af30-f9d5f0b8d1d6",
          "typeOfStateId": "state",
          "$connId": "con_478",
          "$id": "926c684e-81ae-4250-82bd-a612eb4896f4",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Sim"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "2bd09f68-a3d1-4798-a894-9a35f15a170d",
          "typeOfStateId": "state",
          "$connId": "con_483",
          "$id": "83ac0cde-b86a-445f-bfef-d2aa97886fe3",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Não"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "624baf68-f943-4d73-8b9e-124817650f9a",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_createMenuFunction}}\n\nfunction run(userChannel, channelTextTags) {\n    return getMenu(userChannel, channelTextTags);\n}\n\nfunction getMenu(userChannel, channelTextTags) {\n    channelTextTags = JSON.parse(channelTextTags);\n    let options = ['Sim', 'Não'];\n\tconst text = `Para garantir uma ${channelTextTags.open}experiência mais completa${channelTextTags.close} durante nossas conversas, ${channelTextTags.open}atualizei${channelTextTags.close} meus termos e políticas. 😉\\n\\n➡️ Você pode conferir tudo clicando aqui: https://cokeurl.com/Consentimento\\n\\nVocê ${channelTextTags.open}concorda${channelTextTags.close} em continuar? 😍`;\n    \n\n    const menuFields = {\n        text,\n        options\n    };\n    let props = {\n        userChannel,\n        channelTextTags,\n        menuFields\n    };\n    let config = {\n        hasDefaultQuickReply: true,\n        hasWppQuickReply: true,\n        isBlipImmediateMenu: true\n    };\n    let menu = createMenu(props, config);\n    return menu;\n}",
            "inputVariables": ["userChannel", "channelTextTags"],
            "outputVariable": "menu",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "0c464617-f445-4a15-ae00-bd6a9117d4de",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set lastblock",
          "$invalid": false,
          "settings": { "variable": "lastblock", "value": "{{state.id}}" },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "9fb233ac-c1eb-4b59-aaee-10fd50fe4b0e",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Useraction",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_inputProcessingFunction}}\n\nfunction run(inputContent) {\n    return getSelectedMenuOption(inputContent, 'text/plain');\n}\n\nfunction getSelectedMenuOption(inputContent, inputType) {\n    let options = [];\n\n    options.push(\n        {\n            regex: /Sim/,\n            value: 'Sim'\n        },\n        {\n            regex: /Não|Nao/,\n            value: 'Não'\n        }\n    );\n    let props = {\n        input: inputContent,\n        inputType,\n        options\n    };\n    let config = {\n        isNumberMenu: true,\n        isReversed: false,\n        shouldRemoveSpecialCharacters: false,\n        shouldRemoveWhiteSpaces: false\n    };\n    let selectedMenuOption = validateInputOptions(props, config);\n    \n    return selectedMenuOption;\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "userAction"
          },
          "conditions": []
        },
        {
          "$id": "863a6f8c-588e-46f0-a938-50664c0cbdc9",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Set updatedTermsAccepted",
          "$invalid": false,
          "settings": {
            "extras": {
              "updatedTermsAccepted": "true",
              "updatedTermsAcceptedDate": "{{calendar.datetime}}"
            }
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "userAction@value",
              "values": ["Sim"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [],
      "id": "0951d05d-72b2-42de-b842-d9c98d091a26",
      "root": false,
      "$title": "OPTIN - New terms acceptance",
      "$position": { "top": "316px", "left": "4323.33px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "2bd09f68-a3d1-4798-a894-9a35f15a170d": {
      "$contentActions": [
        {
          "action": {
            "$id": "1a291e27-d11e-411e-b91b-4ec934f1d175",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "a97290a8-3f0d-4b86-9ab2-d5338c040d46",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "a97290a8-3f0d-4b86-9ab2-d5338c040d46",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "55e9f73f-3af8-47e3-bfbf-becf28bed04c",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "{{menu@type}}",
              "rawContent": "{{menu@content}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "aaab8743-d2ad-4ddd-b1e8-f29c24f3f19f",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "9a1ed2c3-830e-42c9-a187-83215a469830",
          "typeOfStateId": "state",
          "$connId": "con_488",
          "$id": "cfa47956-fe88-4e0f-ad5c-9cb52cd861c2",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Não"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "d41d5c63-39d4-4a1c-83e5-0fb97f3f84c8",
          "typeOfStateId": "state",
          "$connId": "con_493",
          "$id": "ebfc7179-94b2-4c35-bbf6-40a01053f77b",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Sim"],
              "variable": "userAction@value"
            },
            {
              "source": "context",
              "comparison": "contains",
              "variable": "firstIntent",
              "values": ["flow"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "8890d892-438a-4502-af30-f9d5f0b8d1d6",
          "typeOfStateId": "state",
          "$connId": "con_498",
          "$id": "5a72bedd-3906-4548-8f57-b87ad6be6d05",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Sim"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "624baf68-f943-4d73-8b9e-124817650f9a",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_createMenuFunction}}\n\nfunction run(userChannel, channelTextTags) {\n    return getMenu(userChannel, channelTextTags);\n}\n\nfunction getMenu(userChannel, channelTextTags) {\n    channelTextTags = JSON.parse(channelTextTags);\n    let options = ['Quero concordar.', 'Encerrar conversa.'];\n\tconst text = `Poxa, que pena...\\n\\nAssim, eu nem consigo continuar. 🫤\\n\\nSe você mudar de ideia e quiser concordar com a atualização dos termos, é só me avisar. 😊`;\n    \n\n    const menuFields = {\n        text,\n        options\n    };\n    let props = {\n        userChannel,\n        channelTextTags,\n        menuFields\n    };\n    let config = {\n        hasDefaultQuickReply: true,\n        hasWppQuickReply: true,\n        isBlipImmediateMenu: true\n    };\n    let menu = createMenu(props, config);\n    return menu;\n}",
            "inputVariables": ["userChannel", "channelTextTags"],
            "outputVariable": "menu",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "4950b49f-1df6-4b50-a0ad-d4e14e4615c9",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set lastblock",
          "$invalid": false,
          "settings": { "variable": "lastblock", "value": "{{state.id}}" },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "9fb233ac-c1eb-4b59-aaee-10fd50fe4b0e",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Useraction",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_inputProcessingFunction}}\n\nfunction run(inputContent) {\n    return getSelectedMenuOption(inputContent, 'text/plain');\n}\n\nfunction getSelectedMenuOption(inputContent, inputType) {\n    let options = [];\n\n    options.push(\n        {\n            regex: /Sim|concordar/,\n            value: 'Sim'\n        },\n        {\n            regex: /Não|Nao|Encerrar/,\n            value: 'Não'\n        }\n    );\n    let props = {\n        input: inputContent,\n        inputType,\n        options\n    };\n    let config = {\n        isNumberMenu: true,\n        isReversed: false,\n        shouldRemoveSpecialCharacters: false,\n        shouldRemoveWhiteSpaces: false\n    };\n    let selectedMenuOption = validateInputOptions(props, config);\n    \n    return selectedMenuOption;\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "userAction"
          },
          "conditions": []
        },
        {
          "$id": "df881eb7-09fa-4986-b898-fe85a677b53b",
          "$typeOfContent": "",
          "type": "MergeContact",
          "$title": "[CTT] Set updatedTermsAccepted",
          "$invalid": false,
          "settings": {
            "extras": {
              "updatedTermsAccepted": "true",
              "updatedTermsAcceptedDate": "{{calendar.datetime}}"
            }
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "userAction@value",
              "values": ["Sim"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [],
      "id": "2bd09f68-a3d1-4798-a894-9a35f15a170d",
      "root": false,
      "$title": "OPTIN - New terms not accepted",
      "$position": { "top": "324px", "left": "4559.28px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "9a1ed2c3-830e-42c9-a187-83215a469830": {
      "$contentActions": [
        {
          "action": {
            "$id": "3a19cea5-3d37-480e-9809-657bb7ad9bab",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "8589b0c0-b5a4-4259-a370-b8a5e058d542",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "8589b0c0-b5a4-4259-a370-b8a5e058d542",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "4c77de71-8972-4b3b-bd1b-2b68efec7bba",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "a70196e4-f0c4-4ca6-a82b-07b7c933cd2e",
              "type": "text/plain",
              "content": "Tudo bem.\n\nSe precisar é só chamar!  😊",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "a70196e4-f0c4-4ca6-a82b-07b7c933cd2e",
                "type": "text/plain",
                "content": "Tudo bem.\n\nSe precisar é só chamar!  😊"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "803c414e-408f-4464-9fa1-67bd14d26fa2",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "onboarding",
          "typeOfStateId": "state",
          "$connId": "con_503",
          "$id": "7a308612-c5e4-42b6-8e02-c970f9e4ecda",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [],
      "id": "9a1ed2c3-830e-42c9-a187-83215a469830",
      "root": false,
      "$title": "OPTIN - Finish conversation",
      "$position": { "top": "469.333px", "left": "4739.33px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "d41d5c63-39d4-4a1c-83e5-0fb97f3f84c8": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "86d4379b-fac6-4843-b845-53facea3ead4",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "7a395591-5303-4eaa-88a2-f0e2dae3c698",
          "typeOfStateId": "state",
          "$connId": "con_508",
          "$id": "d3967380-c07c-4c5c-b2f2-09e8c521c983",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "d754efdc-7861-4c56-9a94-05227c003e21",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Set Destiny",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "\nfunction run(firstIntent) {\n    return firstIntent; \n}",
            "inputVariables": ["firstIntent"],
            "outputVariable": "destiny",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "7a395591-5303-4eaa-88a2-f0e2dae3c698",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [],
      "id": "d41d5c63-39d4-4a1c-83e5-0fb97f3f84c8",
      "root": false,
      "$title": "OPTIN - Set Destiny",
      "$position": { "top": "540px", "left": "4331px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "34649fdb-80fb-4ede-b6f3-5815f2b484b9": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "fee2414e-cad1-455e-8172-e65a03e5f7b7",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "typeOfStateId": "state",
          "$connId": "con_513",
          "$id": "05ede3cc-129e-4ae2-9784-d47a8ce56f77",
          "conditions": [
            { "source": "input", "comparison": "exists", "values": [] }
          ],
          "$invalid": false,
          "stateId": "7a395591-5303-4eaa-88a2-f0e2dae3c698"
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "8b747b3a-fc00-4661-a4e4-61d219439a2a",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Destiny",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "\nfunction run() {\n    return {\n    \"destinyBot\": \"TempPromo\",\n    \"input\": \"Áudios Mágicos ✨\",\n    \"blockStateId\": null,\n    \"sendMessage\": {\n        \"flow\": \"#MagicAudios2022\"\n    }\n}\n}",
            "inputVariables": [],
            "outputVariable": "destiny",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "bbf27f00-35a8-4479-8d40-b4f646305d53",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Audios magicos - Redes Sociais - Y10",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Audios magicos - Redes Sociais - Y10",
            "action": "Clicou no anuncio do Instagram"
          },
          "conditions": [
            {
              "source": "input",
              "comparison": "contains",
              "values": ["Instagram"]
            }
          ]
        },
        {
          "$id": "c44a3f5a-5679-48df-b234-f6345030dad5",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Audios magicos - Redes Sociais - Y10",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Audios magicos - Redes Sociais - Y10",
            "action": "Clicou no anuncio"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "$invalid": false,
        "typeOfStateId": "state",
        "stateId": "7a395591-5303-4eaa-88a2-f0e2dae3c698"
      },
      "$tags": [
        {
          "background": "#EA4D9C",
          "label": "Tracking",
          "id": "blip-tag-19cff111-5b09-1b10-fac4-3234574858d9",
          "canChangeBackground": false
        }
      ],
      "id": "34649fdb-80fb-4ede-b6f3-5815f2b484b9",
      "root": false,
      "$title": "[PCR] MAGIC - Generate Destiny TempPromo Anuncio",
      "$position": { "top": "25.5455px", "left": "1599.27px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false,
      "invalidOutputs": true
    },
    "03ac7245-647a-4f30-bdb6-dc30ea351330": {
      "$contentActions": [
        {
          "action": {
            "$id": "63f3ca46-5a8b-49b9-b635-c94bc1f4565a",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "58d209c6-6a01-455e-98f6-221f909f8e69",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "58d209c6-6a01-455e-98f6-221f909f8e69",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "0829e728-4aaa-4408-bcc3-de7800e7e190",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "227446c2-7cd1-42eb-a6e8-103e5dcf091a",
              "type": "text/plain",
              "content": "Infelizmente, a promo Áudios Mágicos acabou. 😕\n\nO período de participação era até as 14h de hoje (26/12).\n\nMas fique atento, pois sempre temos promos incríveis ao longo do ano! 😍",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "227446c2-7cd1-42eb-a6e8-103e5dcf091a",
                "type": "text/plain",
                "content": "Infelizmente, a promo Áudios Mágicos acabou. 😕\n\nO período de participação era até as 14h de hoje (26/12).\n\nMas fique atento, pois sempre temos promos incríveis ao longo do ano! 😍"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "62818253-6bc2-4fae-8677-58d9e8bb1b3b",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "499335a2-8d7a-4d3c-af57-bf254027e15a",
              "type": "application/vnd.lime.chatstate+json",
              "content": { "state": "composing", "interval": 1000 }
            },
            "$cardContent": {
              "document": {
                "id": "499335a2-8d7a-4d3c-af57-bf254027e15a",
                "type": "application/vnd.lime.chatstate+json",
                "content": { "state": "composing", "interval": 1000 }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "8d5a96c7-1217-435e-b424-9936fece131a",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "{{menu@type}}",
              "rawContent": "{{menu@content}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "b3c942c7-293c-4ea8-b4ea-c1f11c4881cf",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "typeOfStateId": "state",
          "$connId": "con_518",
          "$id": "396c3b77-d146-40c8-9895-f5f701a9376f",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Menu Inicial"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false,
          "stateId": "8890d892-438a-4502-af30-f9d5f0b8d1d6"
        },
        {
          "typeOfStateId": "state",
          "$connId": "con_523",
          "$id": "6d6f014c-a191-4d82-9041-ad905d351beb",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Encerrar"],
              "variable": "userAction@value"
            }
          ],
          "$invalid": false,
          "stateId": "a2d2fb8e-56c7-4ab4-83a3-e3021ee70935"
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "cdb79358-d9ea-4326-a801-c76e51b59d3c",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Generate Menu Message",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_createMenuFunction}}\n\nfunction run(userChannel, channelTextTags) {\n    return getMenu(userChannel, channelTextTags);\n}\n\nfunction getMenu(userChannel, channelTextTags) {\n    channelTextTags = JSON.parse(channelTextTags);\n    let options = ['Menu Inicial', 'Encerrar'];\n\tconst text = `O que você quer fazer? 😊`;\n    \n\n    const menuFields = {\n        text,\n        options\n    };\n    let props = {\n        userChannel,\n        channelTextTags,\n        menuFields\n    };\n    let config = {\n        hasDefaultQuickReply: true,\n        hasWppQuickReply: true,\n        isBlipImmediateMenu: true\n    };\n    let menu = createMenu(props, config);\n    return menu;\n}",
            "inputVariables": ["userChannel", "channelTextTags"],
            "outputVariable": "menu",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "aef5dc13-1c48-4d23-8e41-7eb0df9816b3",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "[VAR] Set lastblock",
          "$invalid": false,
          "settings": { "variable": "lastblock", "value": "{{state.id}}" },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "3a034667-fc24-4ca7-a679-22c37a4d06f4",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[SCT] Set userAction",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.dev_inputProcessingFunction}}\n\nfunction run(inputContent) {\n    return getSelectedMenuOption(inputContent, 'text/plain');\n}\n\nfunction getSelectedMenuOption(inputContent, inputType) {\n    let options = [];\n\n    options.push(\n        {\n            regex: /Menu Inicial/,\n            value: 'Menu Inicial'\n        },\n        {\n            regex: /Encerrar/,\n            value: 'Encerrar'\n        }\n    );\n    let props = {\n        input: inputContent,\n        inputType,\n        options\n    };\n    let config = {\n        isNumberMenu: true,\n        isReversed: false,\n        shouldRemoveSpecialCharacters: false,\n        shouldRemoveWhiteSpaces: false\n    };\n    let selectedMenuOption = validateInputOptions(props, config);\n    \n    return selectedMenuOption;\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "userAction"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": { "stateId": "fallback", "$invalid": false },
      "$tags": [],
      "id": "03ac7245-647a-4f30-bdb6-dc30ea351330",
      "root": false,
      "$title": "[MSG] MAGIC - Promo is over - Date",
      "$position": { "top": "210px", "left": "4132px" },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false,
      "invalidOutputs": true
    }
  },
  "globalActions": {
    "$contentActions": [],
    "$conditionOutputs": [],
    "$enteringCustomActions": [
      {
        "$id": "f1daa439-1419-4032-9e4a-b20a177b8da9",
        "$typeOfContent": "",
        "type": "Redirect",
        "$title": "Redirect ConfirmaCompra",
        "$invalid": false,
        "settings": {
          "context": {
            "type": "text/plain",
            "value": "{{contact.extras.purchase}}"
          },
          "address": "Confirma Compra"
        },
        "conditions": [
          {
            "$$hashKey": "object:9430",
            "source": "context",
            "comparison": "equals",
            "variable": "contact.extras.purchase",
            "values": ["true"]
          }
        ]
      },
      {
        "$id": "777cfa9d-6d8c-463c-903f-c4f2706f47a8",
        "$typeOfContent": "",
        "type": "MergeContact",
        "$title": "[CTT] Definy as Spam - Exception Without Email",
        "$invalid": false,
        "settings": {
          "extras": {
            "isSpam": "true",
            "spamInfo": "{{calendar.datetime}}-{{contact.extras.excepctionFlowMain}}",
            "spamReceivedWarning": "false"
          }
        },
        "conditions": [
          {
            "$$hashKey": "object:3046",
            "source": "context",
            "comparison": "notExists",
            "values": [],
            "variable": "contact.extras.isSpam"
          },
          {
            "$$hashKey": "object:4815",
            "source": "context",
            "comparison": "greaterThanOrEquals",
            "variable": "contact.extras.excepctionFlowMain",
            "values": ["18"]
          },
          {
            "$$hashKey": "object:6392",
            "source": "context",
            "comparison": "notExists",
            "values": [],
            "variable": "contact.email"
          }
        ]
      },
      {
        "$id": "93d05f24-1711-457e-82a0-f5883dd15430",
        "$typeOfContent": "",
        "type": "ExecuteScript",
        "$title": "Executar script",
        "$invalid": false,
        "settings": {
          "function": "run",
          "source": "\nfunction run(id) {\n    return {\n        \"id\": \"033b2227-e38d-4e54-84d2-efe68a31da17\",\n        \"to\": \"postmaster@msging.net\",\n        \"method\": \"delete\",\n        \"uri\": `/contexts/${id}/stateid@8f33e5e7-04e8-4ad7-be56-f4fa2508431e`\n    }\n}",
          "inputVariables": ["tunnel.originator"],
          "outputVariable": "deleteBody"
        },
        "conditions": [
          {
            "$$hashKey": "object:24156",
            "source": "context",
            "comparison": "equals",
            "values": ["false"],
            "variable": "contact.extras.spamReceivedWarning"
          }
        ]
      },
      {
        "$id": "93d05f24-1711-457e-82a0-f5883dd15430",
        "$typeOfContent": "",
        "type": "ExecuteScript",
        "$title": "Executar script2",
        "$invalid": false,
        "settings": {
          "function": "run",
          "source": "\nfunction run(id) {\n    return {\n        \"id\": \"033b2227-e38d-4e54-84d2-efe68a31da17\",\n        \"to\": \"postmaster@msging.net\",\n        \"method\": \"delete\",\n        \"uri\": `/contexts/${id}/previous-stateid@8f33e5e7-04e8-4ad7-be56-f4fa2508431e`\n    }\n}",
          "inputVariables": ["tunnel.originator"],
          "outputVariable": "deleteBody2"
        },
        "conditions": [
          {
            "$$hashKey": "object:24156",
            "source": "context",
            "comparison": "equals",
            "values": ["false"],
            "variable": "contact.extras.spamReceivedWarning"
          }
        ]
      }
    ],
    "$leavingCustomActions": [
      {
        "$id": "a4022023-124c-4b46-8c39-e94c3e80af2f",
        "$typeOfContent": "",
        "type": "ProcessHttp",
        "$title": "Requisição HTTP",
        "$invalid": false,
        "settings": {
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Key ZGV2emFwcm91dGVyMTpLUTU0V21wd1RmZTRrUVloZkNuWA=="
          },
          "method": "POST",
          "body": "{{deleteBody2}}",
          "uri": "https://cocacolabrasil.http.msging.net/commands",
          "responseStatusVariable": "",
          "responseBodyVariable": "teste2"
        },
        "conditions": [
          {
            "$$hashKey": "object:21645",
            "source": "context",
            "comparison": "equals",
            "variable": "contact.extras.spamReceivedWarning",
            "values": ["false"]
          }
        ]
      },
      {
        "$id": "a4022023-124c-4b46-8c39-e94c3e80af2f",
        "$typeOfContent": "",
        "type": "ProcessHttp",
        "$title": "Requisição HTTP",
        "$invalid": false,
        "settings": {
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Key ZGV2emFwcm91dGVyMTpLUTU0V21wd1RmZTRrUVloZkNuWA=="
          },
          "method": "POST",
          "body": "{{deleteBody}}",
          "uri": "https://cocacolabrasil.http.msging.net/commands",
          "responseStatusVariable": "",
          "responseBodyVariable": "teste2"
        },
        "conditions": [
          {
            "$$hashKey": "object:21645",
            "source": "context",
            "comparison": "equals",
            "variable": "contact.extras.spamReceivedWarning",
            "values": ["false"]
          }
        ]
      },
      {
        "$id": "a4fa9a8a-5e78-41cb-b046-8e795bc3c30b",
        "$typeOfContent": "",
        "type": "Redirect",
        "$title": "Main",
        "$invalid": false,
        "settings": {
          "context": { "type": "text/plain", "value": "$PAMU$ERBL0CKED" },
          "address": "Main"
        },
        "conditions": [
          {
            "$$hashKey": "object:29078",
            "source": "context",
            "comparison": "equals",
            "variable": "contact.extras.spamReceivedWarning",
            "values": ["false"]
          },
          {
            "$$hashKey": "object:25851",
            "source": "input",
            "comparison": "notEquals",
            "values": ["$PAMU$ERBL0CKED"]
          }
        ]
      }
    ],
    "$inputSuggestions": [],
    "$defaultOutput": { "stateId": "fallback", "$invalid": false },
    "$tags": [],
    "id": "global-actions",
    "$invalidContentActions": false,
    "$invalidOutputs": false,
    "$invalidCustomActions": false,
    "$invalid": false
  }
}
